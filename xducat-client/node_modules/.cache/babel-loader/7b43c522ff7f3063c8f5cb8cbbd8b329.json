{"ast":null,"code":"import { inject, computed, defineComponent, getCurrentInstance, ref, watch, provide, onMounted, resolveComponent, openBlock, createBlock, withCtx, createVNode, renderSlot } from 'vue';\nimport { addClass, removeClass, on } from '../utils/dom';\nimport ElButton from '../el-button';\nimport ElButtonGroup from '../el-button-group';\nimport ElScrollbar from '../el-scrollbar';\nimport ElPopper from '../el-popper';\nimport { useGlobalConfig, addUnit } from '../utils/util';\nimport '../utils/aria';\n\nconst useDropdown = () => {\n  const ELEMENT = useGlobalConfig();\n  const elDropdown = inject(\"elDropdown\", {});\n\n  const _elDropdownSize = computed(() => elDropdown == null ? void 0 : elDropdown.dropdownSize);\n\n  return {\n    ELEMENT,\n    elDropdown,\n    _elDropdownSize\n  };\n};\n\nvar script = defineComponent({\n  name: \"ElDropdown\",\n  components: {\n    ElButton,\n    ElButtonGroup,\n    ElScrollbar,\n    ElPopper\n  },\n  props: {\n    trigger: {\n      type: String,\n      default: \"hover\"\n    },\n    type: String,\n    size: {\n      type: String,\n      default: \"\"\n    },\n    splitButton: Boolean,\n    hideOnClick: {\n      type: Boolean,\n      default: true\n    },\n    placement: {\n      type: String,\n      default: \"bottom\"\n    },\n    showTimeout: {\n      type: Number,\n      default: 150\n    },\n    hideTimeout: {\n      type: Number,\n      default: 150\n    },\n    tabindex: {\n      type: [Number, String],\n      default: 0\n    },\n    effect: {\n      type: String,\n      default: \"light\"\n    },\n    maxHeight: {\n      type: [Number, String],\n      default: \"\"\n    }\n  },\n  emits: [\"visible-change\", \"click\", \"command\"],\n\n  setup(props, {\n    emit\n  }) {\n    const _instance = getCurrentInstance();\n\n    const {\n      ELEMENT\n    } = useDropdown();\n    const timeout = ref(null);\n    const visible = ref(false);\n    const scrollbar = ref(null);\n    const wrapStyle = computed(() => `max-height: ${addUnit(props.maxHeight)}`);\n    watch(() => visible.value, val => {\n      if (val) triggerElmFocus();\n      if (!val) triggerElmBlur();\n      emit(\"visible-change\", val);\n    });\n    const focusing = ref(false);\n    watch(() => focusing.value, val => {\n      const selfDefine = triggerElm.value;\n\n      if (selfDefine) {\n        if (val) {\n          addClass(selfDefine, \"focusing\");\n        } else {\n          removeClass(selfDefine, \"focusing\");\n        }\n      }\n    });\n    const triggerVnode = ref(null);\n    const triggerElm = computed(() => {\n      var _a, _b, _c, _d;\n\n      const _ = (_c = (_b = (_a = triggerVnode.value) == null ? void 0 : _a.$refs.triggerRef) == null ? void 0 : _b.children[0]) != null ? _c : {};\n\n      return !props.splitButton ? _ : (_d = _.children) == null ? void 0 : _d[1];\n    });\n\n    function handleClick() {\n      var _a;\n\n      if ((_a = triggerElm.value) == null ? void 0 : _a.disabled) return;\n\n      if (visible.value) {\n        hide();\n      } else {\n        show();\n      }\n    }\n\n    function show() {\n      var _a;\n\n      if ((_a = triggerElm.value) == null ? void 0 : _a.disabled) return;\n      timeout.value && clearTimeout(timeout.value);\n      timeout.value = window.setTimeout(() => {\n        visible.value = true;\n      }, [\"click\", \"contextmenu\"].includes(props.trigger) ? 0 : props.showTimeout);\n    }\n\n    function hide() {\n      var _a;\n\n      if ((_a = triggerElm.value) == null ? void 0 : _a.disabled) return;\n      removeTabindex();\n\n      if (props.tabindex >= 0) {\n        resetTabindex(triggerElm.value);\n      }\n\n      clearTimeout(timeout.value);\n      timeout.value = window.setTimeout(() => {\n        visible.value = false;\n      }, [\"click\", \"contextmenu\"].includes(props.trigger) ? 0 : props.hideTimeout);\n    }\n\n    function removeTabindex() {\n      var _a;\n\n      (_a = triggerElm.value) == null ? void 0 : _a.setAttribute(\"tabindex\", \"-1\");\n    }\n\n    function resetTabindex(ele) {\n      removeTabindex();\n      ele == null ? void 0 : ele.setAttribute(\"tabindex\", \"0\");\n    }\n\n    function triggerElmFocus() {\n      var _a, _b;\n\n      (_b = (_a = triggerElm.value) == null ? void 0 : _a.focus) == null ? void 0 : _b.call(_a);\n    }\n\n    function triggerElmBlur() {\n      var _a, _b;\n\n      (_b = (_a = triggerElm.value) == null ? void 0 : _a.blur) == null ? void 0 : _b.call(_a);\n    }\n\n    const dropdownSize = computed(() => props.size || ELEMENT.size);\n\n    function commandHandler(...args) {\n      emit(\"command\", ...args);\n    }\n\n    provide(\"elDropdown\", {\n      instance: _instance,\n      dropdownSize,\n      visible,\n      handleClick,\n      commandHandler,\n      show,\n      hide,\n      trigger: computed(() => props.trigger),\n      hideOnClick: computed(() => props.hideOnClick),\n      triggerElm\n    });\n    onMounted(() => {\n      if (!props.splitButton) {\n        on(triggerElm.value, \"focus\", () => {\n          focusing.value = true;\n        });\n        on(triggerElm.value, \"blur\", () => {\n          focusing.value = false;\n        });\n        on(triggerElm.value, \"click\", () => {\n          focusing.value = false;\n        });\n      }\n\n      if (props.trigger === \"hover\") {\n        on(triggerElm.value, \"mouseenter\", show);\n        on(triggerElm.value, \"mouseleave\", hide);\n      } else if (props.trigger === \"click\") {\n        on(triggerElm.value, \"click\", handleClick);\n      } else if (props.trigger === \"contextmenu\") {\n        on(triggerElm.value, \"contextmenu\", e => {\n          e.preventDefault();\n          handleClick();\n        });\n      }\n\n      Object.assign(_instance, {\n        handleClick,\n        hide,\n        resetTabindex\n      });\n    });\n\n    const handlerMainButtonClick = event => {\n      emit(\"click\", event);\n      hide();\n    };\n\n    return {\n      visible,\n      scrollbar,\n      wrapStyle,\n      dropdownSize,\n      handlerMainButtonClick,\n      triggerVnode\n    };\n  }\n\n});\n\nconst _hoisted_1 = /* @__PURE__ */createVNode(\"i\", {\n  class: \"el-dropdown__icon el-icon-arrow-down\"\n}, null, -1);\n\nfunction render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_el_scrollbar = resolveComponent(\"el-scrollbar\");\n\n  const _component_el_button = resolveComponent(\"el-button\");\n\n  const _component_el_button_group = resolveComponent(\"el-button-group\");\n\n  const _component_el_popper = resolveComponent(\"el-popper\");\n\n  return openBlock(), createBlock(_component_el_popper, {\n    ref: \"triggerVnode\",\n    visible: _ctx.visible,\n    \"onUpdate:visible\": _cache[1] || (_cache[1] = $event => _ctx.visible = $event),\n    placement: _ctx.placement,\n    \"fallback-placements\": [\"bottom\", \"top\", \"right\", \"left\"],\n    effect: _ctx.effect,\n    pure: \"\",\n    \"manual-mode\": true,\n    trigger: [_ctx.trigger],\n    \"popper-class\": \"el-dropdown__popper\",\n    \"append-to-body\": \"\",\n    transition: \"el-zoom-in-top\",\n    \"stop-popper-mouse-event\": false,\n    \"gpu-acceleration\": false\n  }, {\n    default: withCtx(() => [createVNode(_component_el_scrollbar, {\n      ref: \"scrollbar\",\n      tag: \"ul\",\n      \"wrap-style\": _ctx.wrapStyle,\n      \"view-class\": \"el-dropdown__list\"\n    }, {\n      default: withCtx(() => [renderSlot(_ctx.$slots, \"dropdown\")]),\n      _: 3\n    }, 8, [\"wrap-style\"])]),\n    trigger: withCtx(() => [createVNode(\"div\", {\n      class: [\"el-dropdown\", _ctx.dropdownSize ? \"el-dropdown--\" + _ctx.dropdownSize : \"\"]\n    }, [!_ctx.splitButton ? renderSlot(_ctx.$slots, \"default\", {\n      key: 0\n    }) : (openBlock(), createBlock(_component_el_button_group, {\n      key: 1\n    }, {\n      default: withCtx(() => [createVNode(_component_el_button, {\n        size: _ctx.dropdownSize,\n        type: _ctx.type,\n        onClick: _ctx.handlerMainButtonClick\n      }, {\n        default: withCtx(() => [renderSlot(_ctx.$slots, \"default\")]),\n        _: 3\n      }, 8, [\"size\", \"type\", \"onClick\"]), createVNode(_component_el_button, {\n        size: _ctx.dropdownSize,\n        type: _ctx.type,\n        class: \"el-dropdown__caret-button\"\n      }, {\n        default: withCtx(() => [_hoisted_1]),\n        _: 1\n      }, 8, [\"size\", \"type\"])]),\n      _: 1\n    }))], 2)]),\n    _: 1\n  }, 8, [\"visible\", \"placement\", \"effect\", \"trigger\"]);\n}\n\nscript.render = render;\nscript.__file = \"packages/dropdown/src/dropdown.vue\";\n\nscript.install = app => {\n  app.component(script.name, script);\n};\n\nconst _Dropdown = script;\nexport default _Dropdown;","map":{"version":3,"sources":["F:/XDUcat/XDUcat-client/node_modules/element-plus/es/el-dropdown/index.js"],"names":["inject","computed","defineComponent","getCurrentInstance","ref","watch","provide","onMounted","resolveComponent","openBlock","createBlock","withCtx","createVNode","renderSlot","addClass","removeClass","on","ElButton","ElButtonGroup","ElScrollbar","ElPopper","useGlobalConfig","addUnit","useDropdown","ELEMENT","elDropdown","_elDropdownSize","dropdownSize","script","name","components","props","trigger","type","String","default","size","splitButton","Boolean","hideOnClick","placement","showTimeout","Number","hideTimeout","tabindex","effect","maxHeight","emits","setup","emit","_instance","timeout","visible","scrollbar","wrapStyle","value","val","triggerElmFocus","triggerElmBlur","focusing","selfDefine","triggerElm","triggerVnode","_a","_b","_c","_d","_","$refs","triggerRef","children","handleClick","disabled","hide","show","clearTimeout","window","setTimeout","includes","removeTabindex","resetTabindex","setAttribute","ele","focus","call","blur","commandHandler","args","instance","e","preventDefault","Object","assign","handlerMainButtonClick","event","_hoisted_1","class","render","_ctx","_cache","$props","$setup","$data","$options","_component_el_scrollbar","_component_el_button","_component_el_button_group","_component_el_popper","$event","pure","transition","tag","$slots","key","onClick","__file","install","app","component","_Dropdown"],"mappings":"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","sourcesContent":["import { inject, computed, defineComponent, getCurrentInstance, ref, watch, provide, onMounted, resolveComponent, openBlock, createBlock, withCtx, createVNode, renderSlot } from 'vue';\nimport { addClass, removeClass, on } from '../utils/dom';\nimport ElButton from '../el-button';\nimport ElButtonGroup from '../el-button-group';\nimport ElScrollbar from '../el-scrollbar';\nimport ElPopper from '../el-popper';\nimport { useGlobalConfig, addUnit } from '../utils/util';\nimport '../utils/aria';\n\nconst useDropdown = () => {\n  const ELEMENT = useGlobalConfig();\n  const elDropdown = inject(\"elDropdown\", {});\n  const _elDropdownSize = computed(() => elDropdown == null ? void 0 : elDropdown.dropdownSize);\n  return {\n    ELEMENT,\n    elDropdown,\n    _elDropdownSize\n  };\n};\n\nvar script = defineComponent({\n  name: \"ElDropdown\",\n  components: {\n    ElButton,\n    ElButtonGroup,\n    ElScrollbar,\n    ElPopper\n  },\n  props: {\n    trigger: {\n      type: String,\n      default: \"hover\"\n    },\n    type: String,\n    size: {\n      type: String,\n      default: \"\"\n    },\n    splitButton: Boolean,\n    hideOnClick: {\n      type: Boolean,\n      default: true\n    },\n    placement: {\n      type: String,\n      default: \"bottom\"\n    },\n    showTimeout: {\n      type: Number,\n      default: 150\n    },\n    hideTimeout: {\n      type: Number,\n      default: 150\n    },\n    tabindex: {\n      type: [Number, String],\n      default: 0\n    },\n    effect: {\n      type: String,\n      default: \"light\"\n    },\n    maxHeight: {\n      type: [Number, String],\n      default: \"\"\n    }\n  },\n  emits: [\"visible-change\", \"click\", \"command\"],\n  setup(props, { emit }) {\n    const _instance = getCurrentInstance();\n    const { ELEMENT } = useDropdown();\n    const timeout = ref(null);\n    const visible = ref(false);\n    const scrollbar = ref(null);\n    const wrapStyle = computed(() => `max-height: ${addUnit(props.maxHeight)}`);\n    watch(() => visible.value, (val) => {\n      if (val)\n        triggerElmFocus();\n      if (!val)\n        triggerElmBlur();\n      emit(\"visible-change\", val);\n    });\n    const focusing = ref(false);\n    watch(() => focusing.value, (val) => {\n      const selfDefine = triggerElm.value;\n      if (selfDefine) {\n        if (val) {\n          addClass(selfDefine, \"focusing\");\n        } else {\n          removeClass(selfDefine, \"focusing\");\n        }\n      }\n    });\n    const triggerVnode = ref(null);\n    const triggerElm = computed(() => {\n      var _a, _b, _c, _d;\n      const _ = (_c = (_b = (_a = triggerVnode.value) == null ? void 0 : _a.$refs.triggerRef) == null ? void 0 : _b.children[0]) != null ? _c : {};\n      return !props.splitButton ? _ : (_d = _.children) == null ? void 0 : _d[1];\n    });\n    function handleClick() {\n      var _a;\n      if ((_a = triggerElm.value) == null ? void 0 : _a.disabled)\n        return;\n      if (visible.value) {\n        hide();\n      } else {\n        show();\n      }\n    }\n    function show() {\n      var _a;\n      if ((_a = triggerElm.value) == null ? void 0 : _a.disabled)\n        return;\n      timeout.value && clearTimeout(timeout.value);\n      timeout.value = window.setTimeout(() => {\n        visible.value = true;\n      }, [\"click\", \"contextmenu\"].includes(props.trigger) ? 0 : props.showTimeout);\n    }\n    function hide() {\n      var _a;\n      if ((_a = triggerElm.value) == null ? void 0 : _a.disabled)\n        return;\n      removeTabindex();\n      if (props.tabindex >= 0) {\n        resetTabindex(triggerElm.value);\n      }\n      clearTimeout(timeout.value);\n      timeout.value = window.setTimeout(() => {\n        visible.value = false;\n      }, [\"click\", \"contextmenu\"].includes(props.trigger) ? 0 : props.hideTimeout);\n    }\n    function removeTabindex() {\n      var _a;\n      (_a = triggerElm.value) == null ? void 0 : _a.setAttribute(\"tabindex\", \"-1\");\n    }\n    function resetTabindex(ele) {\n      removeTabindex();\n      ele == null ? void 0 : ele.setAttribute(\"tabindex\", \"0\");\n    }\n    function triggerElmFocus() {\n      var _a, _b;\n      (_b = (_a = triggerElm.value) == null ? void 0 : _a.focus) == null ? void 0 : _b.call(_a);\n    }\n    function triggerElmBlur() {\n      var _a, _b;\n      (_b = (_a = triggerElm.value) == null ? void 0 : _a.blur) == null ? void 0 : _b.call(_a);\n    }\n    const dropdownSize = computed(() => props.size || ELEMENT.size);\n    function commandHandler(...args) {\n      emit(\"command\", ...args);\n    }\n    provide(\"elDropdown\", {\n      instance: _instance,\n      dropdownSize,\n      visible,\n      handleClick,\n      commandHandler,\n      show,\n      hide,\n      trigger: computed(() => props.trigger),\n      hideOnClick: computed(() => props.hideOnClick),\n      triggerElm\n    });\n    onMounted(() => {\n      if (!props.splitButton) {\n        on(triggerElm.value, \"focus\", () => {\n          focusing.value = true;\n        });\n        on(triggerElm.value, \"blur\", () => {\n          focusing.value = false;\n        });\n        on(triggerElm.value, \"click\", () => {\n          focusing.value = false;\n        });\n      }\n      if (props.trigger === \"hover\") {\n        on(triggerElm.value, \"mouseenter\", show);\n        on(triggerElm.value, \"mouseleave\", hide);\n      } else if (props.trigger === \"click\") {\n        on(triggerElm.value, \"click\", handleClick);\n      } else if (props.trigger === \"contextmenu\") {\n        on(triggerElm.value, \"contextmenu\", (e) => {\n          e.preventDefault();\n          handleClick();\n        });\n      }\n      Object.assign(_instance, {\n        handleClick,\n        hide,\n        resetTabindex\n      });\n    });\n    const handlerMainButtonClick = (event) => {\n      emit(\"click\", event);\n      hide();\n    };\n    return {\n      visible,\n      scrollbar,\n      wrapStyle,\n      dropdownSize,\n      handlerMainButtonClick,\n      triggerVnode\n    };\n  }\n});\n\nconst _hoisted_1 = /* @__PURE__ */ createVNode(\"i\", { class: \"el-dropdown__icon el-icon-arrow-down\" }, null, -1);\nfunction render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_el_scrollbar = resolveComponent(\"el-scrollbar\");\n  const _component_el_button = resolveComponent(\"el-button\");\n  const _component_el_button_group = resolveComponent(\"el-button-group\");\n  const _component_el_popper = resolveComponent(\"el-popper\");\n  return openBlock(), createBlock(_component_el_popper, {\n    ref: \"triggerVnode\",\n    visible: _ctx.visible,\n    \"onUpdate:visible\": _cache[1] || (_cache[1] = ($event) => _ctx.visible = $event),\n    placement: _ctx.placement,\n    \"fallback-placements\": [\"bottom\", \"top\", \"right\", \"left\"],\n    effect: _ctx.effect,\n    pure: \"\",\n    \"manual-mode\": true,\n    trigger: [_ctx.trigger],\n    \"popper-class\": \"el-dropdown__popper\",\n    \"append-to-body\": \"\",\n    transition: \"el-zoom-in-top\",\n    \"stop-popper-mouse-event\": false,\n    \"gpu-acceleration\": false\n  }, {\n    default: withCtx(() => [\n      createVNode(_component_el_scrollbar, {\n        ref: \"scrollbar\",\n        tag: \"ul\",\n        \"wrap-style\": _ctx.wrapStyle,\n        \"view-class\": \"el-dropdown__list\"\n      }, {\n        default: withCtx(() => [\n          renderSlot(_ctx.$slots, \"dropdown\")\n        ]),\n        _: 3\n      }, 8, [\"wrap-style\"])\n    ]),\n    trigger: withCtx(() => [\n      createVNode(\"div\", {\n        class: [\"el-dropdown\", _ctx.dropdownSize ? \"el-dropdown--\" + _ctx.dropdownSize : \"\"]\n      }, [\n        !_ctx.splitButton ? renderSlot(_ctx.$slots, \"default\", { key: 0 }) : (openBlock(), createBlock(_component_el_button_group, { key: 1 }, {\n          default: withCtx(() => [\n            createVNode(_component_el_button, {\n              size: _ctx.dropdownSize,\n              type: _ctx.type,\n              onClick: _ctx.handlerMainButtonClick\n            }, {\n              default: withCtx(() => [\n                renderSlot(_ctx.$slots, \"default\")\n              ]),\n              _: 3\n            }, 8, [\"size\", \"type\", \"onClick\"]),\n            createVNode(_component_el_button, {\n              size: _ctx.dropdownSize,\n              type: _ctx.type,\n              class: \"el-dropdown__caret-button\"\n            }, {\n              default: withCtx(() => [\n                _hoisted_1\n              ]),\n              _: 1\n            }, 8, [\"size\", \"type\"])\n          ]),\n          _: 1\n        }))\n      ], 2)\n    ]),\n    _: 1\n  }, 8, [\"visible\", \"placement\", \"effect\", \"trigger\"]);\n}\n\nscript.render = render;\nscript.__file = \"packages/dropdown/src/dropdown.vue\";\n\nscript.install = (app) => {\n  app.component(script.name, script);\n};\nconst _Dropdown = script;\n\nexport default _Dropdown;\n"]},"metadata":{},"sourceType":"module"}