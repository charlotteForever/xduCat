{"ast":null,"code":"import { addResizeListener, removeResizeListener } from '../utils/resize-event';\nimport { isArray, toObject, addUnit, isString, isNumber } from '../utils/util';\nimport { defineComponent, ref, inject, computed, onMounted, onBeforeUnmount, openBlock, createBlock, Transition, withCtx, withDirectives, createVNode, vShow, provide, nextTick, resolveComponent, resolveDynamicComponent, renderSlot, Fragment, createCommentVNode } from 'vue';\nimport { on, off } from '../utils/dom';\nimport { warn } from '../utils/error';\nconst BAR_MAP = {\n  vertical: {\n    offset: \"offsetHeight\",\n    scroll: \"scrollTop\",\n    scrollSize: \"scrollHeight\",\n    size: \"height\",\n    key: \"vertical\",\n    axis: \"Y\",\n    client: \"clientY\",\n    direction: \"top\"\n  },\n  horizontal: {\n    offset: \"offsetWidth\",\n    scroll: \"scrollLeft\",\n    scrollSize: \"scrollWidth\",\n    size: \"width\",\n    key: \"horizontal\",\n    axis: \"X\",\n    client: \"clientX\",\n    direction: \"left\"\n  }\n};\n\nfunction renderThumbStyle({\n  move,\n  size,\n  bar\n}) {\n  const style = {};\n  const translate = `translate${bar.axis}(${move}%)`;\n  style[bar.size] = size;\n  style.transform = translate;\n  style.msTransform = translate;\n  style.webkitTransform = translate;\n  return style;\n}\n\nvar __pow = Math.pow;\nvar script = defineComponent({\n  name: \"Bar\",\n  props: {\n    vertical: Boolean,\n    size: String,\n    move: Number,\n    ratio: Number,\n    always: Boolean\n  },\n\n  setup(props) {\n    const instance = ref(null);\n    const thumb = ref(null);\n    const scrollbar = inject(\"scrollbar\", {});\n    const wrap = inject(\"scrollbar-wrap\", {});\n    const bar = computed(() => BAR_MAP[props.vertical ? \"vertical\" : \"horizontal\"]);\n    const barStore = ref({});\n    const cursorDown = ref(null);\n    const cursorLeave = ref(null);\n    const visible = ref(false);\n    let onselectstartStore = null;\n    const offsetRatio = computed(() => {\n      return __pow(instance.value[bar.value.offset], 2) / wrap.value[bar.value.scrollSize] / props.ratio / thumb.value[bar.value.offset];\n    });\n\n    const clickThumbHandler = e => {\n      e.stopPropagation();\n\n      if (e.ctrlKey || [1, 2].includes(e.button)) {\n        return;\n      }\n\n      window.getSelection().removeAllRanges();\n      startDrag(e);\n      barStore.value[bar.value.axis] = e.currentTarget[bar.value.offset] - (e[bar.value.client] - e.currentTarget.getBoundingClientRect()[bar.value.direction]);\n    };\n\n    const clickTrackHandler = e => {\n      const offset = Math.abs(e.target.getBoundingClientRect()[bar.value.direction] - e[bar.value.client]);\n      const thumbHalf = thumb.value[bar.value.offset] / 2;\n      const thumbPositionPercentage = (offset - thumbHalf) * 100 * offsetRatio.value / instance.value[bar.value.offset];\n      wrap.value[bar.value.scroll] = thumbPositionPercentage * wrap.value[bar.value.scrollSize] / 100;\n    };\n\n    const startDrag = e => {\n      e.stopImmediatePropagation();\n      cursorDown.value = true;\n      on(document, \"mousemove\", mouseMoveDocumentHandler);\n      on(document, \"mouseup\", mouseUpDocumentHandler);\n      onselectstartStore = document.onselectstart;\n\n      document.onselectstart = () => false;\n    };\n\n    const mouseMoveDocumentHandler = e => {\n      if (cursorDown.value === false) return;\n      const prevPage = barStore.value[bar.value.axis];\n      if (!prevPage) return;\n      const offset = (instance.value.getBoundingClientRect()[bar.value.direction] - e[bar.value.client]) * -1;\n      const thumbClickPosition = thumb.value[bar.value.offset] - prevPage;\n      const thumbPositionPercentage = (offset - thumbClickPosition) * 100 * offsetRatio.value / instance.value[bar.value.offset];\n      wrap.value[bar.value.scroll] = thumbPositionPercentage * wrap.value[bar.value.scrollSize] / 100;\n    };\n\n    const mouseUpDocumentHandler = () => {\n      cursorDown.value = false;\n      barStore.value[bar.value.axis] = 0;\n      off(document, \"mousemove\", mouseMoveDocumentHandler);\n      document.onselectstart = onselectstartStore;\n\n      if (cursorLeave.value) {\n        visible.value = false;\n      }\n    };\n\n    const thumbStyle = computed(() => renderThumbStyle({\n      size: props.size,\n      move: props.move,\n      bar: bar.value\n    }));\n\n    const mouseMoveScrollbarHandler = () => {\n      cursorLeave.value = false;\n      visible.value = !!props.size;\n    };\n\n    const mouseLeaveScrollbarHandler = () => {\n      cursorLeave.value = true;\n      visible.value = cursorDown.value;\n    };\n\n    onMounted(() => {\n      on(scrollbar.value, \"mousemove\", mouseMoveScrollbarHandler);\n      on(scrollbar.value, \"mouseleave\", mouseLeaveScrollbarHandler);\n    });\n    onBeforeUnmount(() => {\n      off(document, \"mouseup\", mouseUpDocumentHandler);\n      off(scrollbar.value, \"mousemove\", mouseMoveScrollbarHandler);\n      off(scrollbar.value, \"mouseleave\", mouseLeaveScrollbarHandler);\n    });\n    return {\n      instance,\n      thumb,\n      bar,\n      clickTrackHandler,\n      clickThumbHandler,\n      thumbStyle,\n      visible\n    };\n  }\n\n});\n\nfunction render(_ctx, _cache, $props, $setup, $data, $options) {\n  return openBlock(), createBlock(Transition, {\n    name: \"el-scrollbar-fade\"\n  }, {\n    default: withCtx(() => [withDirectives(createVNode(\"div\", {\n      ref: \"instance\",\n      class: [\"el-scrollbar__bar\", \"is-\" + _ctx.bar.key],\n      onMousedown: _cache[2] || (_cache[2] = (...args) => _ctx.clickTrackHandler && _ctx.clickTrackHandler(...args))\n    }, [createVNode(\"div\", {\n      ref: \"thumb\",\n      class: \"el-scrollbar__thumb\",\n      style: _ctx.thumbStyle,\n      onMousedown: _cache[1] || (_cache[1] = (...args) => _ctx.clickThumbHandler && _ctx.clickThumbHandler(...args))\n    }, null, 36)], 34), [[vShow, _ctx.always || _ctx.visible]])]),\n    _: 1\n  });\n}\n\nscript.render = render;\nscript.__file = \"packages/scrollbar/src/bar.vue\";\nvar __pow$1 = Math.pow;\nvar script$1 = defineComponent({\n  name: \"ElScrollbar\",\n  components: {\n    Bar: script\n  },\n  props: {\n    height: {\n      type: [String, Number],\n      default: \"\"\n    },\n    maxHeight: {\n      type: [String, Number],\n      default: \"\"\n    },\n    native: {\n      type: Boolean,\n      default: false\n    },\n    wrapStyle: {\n      type: [String, Array],\n      default: \"\"\n    },\n    wrapClass: {\n      type: [String, Array],\n      default: \"\"\n    },\n    viewClass: {\n      type: [String, Array],\n      default: \"\"\n    },\n    viewStyle: {\n      type: [String, Array],\n      default: \"\"\n    },\n    noresize: Boolean,\n    tag: {\n      type: String,\n      default: \"div\"\n    },\n    always: {\n      type: Boolean,\n      default: false\n    },\n    minSize: {\n      type: Number,\n      default: 20\n    }\n  },\n  emits: [\"scroll\"],\n\n  setup(props, {\n    emit\n  }) {\n    const sizeWidth = ref(\"0\");\n    const sizeHeight = ref(\"0\");\n    const moveX = ref(0);\n    const moveY = ref(0);\n    const scrollbar = ref(null);\n    const wrap = ref(null);\n    const resize = ref(null);\n    const ratioY = ref(1);\n    const ratioX = ref(1);\n    const SCOPE = \"ElScrollbar\";\n    const GAP = 4;\n    provide(\"scrollbar\", scrollbar);\n    provide(\"scrollbar-wrap\", wrap);\n\n    const handleScroll = () => {\n      if (wrap.value) {\n        const offsetHeight = wrap.value.offsetHeight - GAP;\n        const offsetWidth = wrap.value.offsetWidth - GAP;\n        moveY.value = wrap.value.scrollTop * 100 / offsetHeight * ratioY.value;\n        moveX.value = wrap.value.scrollLeft * 100 / offsetWidth * ratioX.value;\n        emit(\"scroll\", {\n          scrollTop: wrap.value.scrollTop,\n          scrollLeft: wrap.value.scrollLeft\n        });\n      }\n    };\n\n    const setScrollTop = value => {\n      if (!isNumber(value)) {\n        if (process.env.NODE_ENV !== \"production\") {\n          warn(SCOPE, \"value must be a number\");\n        }\n\n        return;\n      }\n\n      wrap.value.scrollTop = value;\n    };\n\n    const setScrollLeft = value => {\n      if (!isNumber(value)) {\n        if (process.env.NODE_ENV !== \"production\") {\n          warn(SCOPE, \"value must be a number\");\n        }\n\n        return;\n      }\n\n      wrap.value.scrollLeft = value;\n    };\n\n    const update = () => {\n      if (!wrap.value) return;\n      const offsetHeight = wrap.value.offsetHeight - GAP;\n      const offsetWidth = wrap.value.offsetWidth - GAP;\n      const originalHeight = __pow$1(offsetHeight, 2) / wrap.value.scrollHeight;\n      const originalWidth = __pow$1(offsetWidth, 2) / wrap.value.scrollWidth;\n      const height = Math.max(originalHeight, props.minSize);\n      const width = Math.max(originalWidth, props.minSize);\n      ratioY.value = originalHeight / (offsetHeight - originalHeight) / (height / (offsetHeight - height));\n      ratioX.value = originalWidth / (offsetWidth - originalWidth) / (width / (offsetWidth - width));\n      sizeHeight.value = height + GAP < offsetHeight ? height + \"px\" : \"\";\n      sizeWidth.value = width + GAP < offsetWidth ? width + \"px\" : \"\";\n    };\n\n    const style = computed(() => {\n      let style2 = props.wrapStyle;\n\n      if (isArray(style2)) {\n        style2 = toObject(style2);\n        style2.height = addUnit(props.height);\n        style2.maxHeight = addUnit(props.maxHeight);\n      } else if (isString(style2)) {\n        style2 += addUnit(props.height) ? `height: ${addUnit(props.height)};` : \"\";\n        style2 += addUnit(props.maxHeight) ? `max-height: ${addUnit(props.maxHeight)};` : \"\";\n      }\n\n      return style2;\n    });\n    onMounted(() => {\n      if (!props.native) {\n        nextTick(update);\n      }\n\n      if (!props.noresize) {\n        addResizeListener(resize.value, update);\n        addEventListener(\"resize\", update);\n      }\n    });\n    onBeforeUnmount(() => {\n      if (!props.noresize) {\n        removeResizeListener(resize.value, update);\n        removeEventListener(\"resize\", update);\n      }\n    });\n    return {\n      moveX,\n      moveY,\n      ratioX,\n      ratioY,\n      sizeWidth,\n      sizeHeight,\n      style,\n      scrollbar,\n      wrap,\n      resize,\n      update,\n      handleScroll,\n      setScrollTop,\n      setScrollLeft\n    };\n  }\n\n});\nconst _hoisted_1 = {\n  ref: \"scrollbar\",\n  class: \"el-scrollbar\"\n};\n\nfunction render$1(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_bar = resolveComponent(\"bar\");\n\n  return openBlock(), createBlock(\"div\", _hoisted_1, [createVNode(\"div\", {\n    ref: \"wrap\",\n    class: [_ctx.wrapClass, \"el-scrollbar__wrap\", _ctx.native ? \"\" : \"el-scrollbar__wrap--hidden-default\"],\n    style: _ctx.style,\n    onScroll: _cache[1] || (_cache[1] = (...args) => _ctx.handleScroll && _ctx.handleScroll(...args))\n  }, [(openBlock(), createBlock(resolveDynamicComponent(_ctx.tag), {\n    ref: \"resize\",\n    class: [\"el-scrollbar__view\", _ctx.viewClass],\n    style: _ctx.viewStyle\n  }, {\n    default: withCtx(() => [renderSlot(_ctx.$slots, \"default\")]),\n    _: 3\n  }, 8, [\"class\", \"style\"]))], 38), !_ctx.native ? (openBlock(), createBlock(Fragment, {\n    key: 0\n  }, [createVNode(_component_bar, {\n    move: _ctx.moveX,\n    ratio: _ctx.ratioX,\n    size: _ctx.sizeWidth,\n    always: _ctx.always\n  }, null, 8, [\"move\", \"ratio\", \"size\", \"always\"]), createVNode(_component_bar, {\n    move: _ctx.moveY,\n    ratio: _ctx.ratioY,\n    size: _ctx.sizeHeight,\n    vertical: \"\",\n    always: _ctx.always\n  }, null, 8, [\"move\", \"ratio\", \"size\", \"always\"])], 64)) : createCommentVNode(\"v-if\", true)], 512);\n}\n\nscript$1.render = render$1;\nscript$1.__file = \"packages/scrollbar/src/index.vue\";\n\nscript$1.install = app => {\n  app.component(script$1.name, script$1);\n};\n\nconst _Scrollbar = script$1;\nexport default _Scrollbar;","map":{"version":3,"sources":["F:/XDUcat/XDUcat-client/node_modules/element-plus/es/el-scrollbar/index.js"],"names":["addResizeListener","removeResizeListener","isArray","toObject","addUnit","isString","isNumber","defineComponent","ref","inject","computed","onMounted","onBeforeUnmount","openBlock","createBlock","Transition","withCtx","withDirectives","createVNode","vShow","provide","nextTick","resolveComponent","resolveDynamicComponent","renderSlot","Fragment","createCommentVNode","on","off","warn","BAR_MAP","vertical","offset","scroll","scrollSize","size","key","axis","client","direction","horizontal","renderThumbStyle","move","bar","style","translate","transform","msTransform","webkitTransform","__pow","Math","pow","script","name","props","Boolean","String","Number","ratio","always","setup","instance","thumb","scrollbar","wrap","barStore","cursorDown","cursorLeave","visible","onselectstartStore","offsetRatio","value","clickThumbHandler","e","stopPropagation","ctrlKey","includes","button","window","getSelection","removeAllRanges","startDrag","currentTarget","getBoundingClientRect","clickTrackHandler","abs","target","thumbHalf","thumbPositionPercentage","stopImmediatePropagation","document","mouseMoveDocumentHandler","mouseUpDocumentHandler","onselectstart","prevPage","thumbClickPosition","thumbStyle","mouseMoveScrollbarHandler","mouseLeaveScrollbarHandler","render","_ctx","_cache","$props","$setup","$data","$options","default","class","onMousedown","args","_","__file","__pow$1","script$1","components","Bar","height","type","maxHeight","native","wrapStyle","Array","wrapClass","viewClass","viewStyle","noresize","tag","minSize","emits","emit","sizeWidth","sizeHeight","moveX","moveY","resize","ratioY","ratioX","SCOPE","GAP","handleScroll","offsetHeight","offsetWidth","scrollTop","scrollLeft","setScrollTop","process","env","NODE_ENV","setScrollLeft","update","originalHeight","scrollHeight","originalWidth","scrollWidth","max","width","style2","addEventListener","removeEventListener","_hoisted_1","render$1","_component_bar","onScroll","$slots","install","app","component","_Scrollbar"],"mappings":"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","sourcesContent":["import { addResizeListener, removeResizeListener } from '../utils/resize-event';\nimport { isArray, toObject, addUnit, isString, isNumber } from '../utils/util';\nimport { defineComponent, ref, inject, computed, onMounted, onBeforeUnmount, openBlock, createBlock, Transition, withCtx, withDirectives, createVNode, vShow, provide, nextTick, resolveComponent, resolveDynamicComponent, renderSlot, Fragment, createCommentVNode } from 'vue';\nimport { on, off } from '../utils/dom';\nimport { warn } from '../utils/error';\n\nconst BAR_MAP = {\n  vertical: {\n    offset: \"offsetHeight\",\n    scroll: \"scrollTop\",\n    scrollSize: \"scrollHeight\",\n    size: \"height\",\n    key: \"vertical\",\n    axis: \"Y\",\n    client: \"clientY\",\n    direction: \"top\"\n  },\n  horizontal: {\n    offset: \"offsetWidth\",\n    scroll: \"scrollLeft\",\n    scrollSize: \"scrollWidth\",\n    size: \"width\",\n    key: \"horizontal\",\n    axis: \"X\",\n    client: \"clientX\",\n    direction: \"left\"\n  }\n};\nfunction renderThumbStyle({ move, size, bar }) {\n  const style = {};\n  const translate = `translate${bar.axis}(${move}%)`;\n  style[bar.size] = size;\n  style.transform = translate;\n  style.msTransform = translate;\n  style.webkitTransform = translate;\n  return style;\n}\n\nvar __pow = Math.pow;\nvar script = defineComponent({\n  name: \"Bar\",\n  props: {\n    vertical: Boolean,\n    size: String,\n    move: Number,\n    ratio: Number,\n    always: Boolean\n  },\n  setup(props) {\n    const instance = ref(null);\n    const thumb = ref(null);\n    const scrollbar = inject(\"scrollbar\", {});\n    const wrap = inject(\"scrollbar-wrap\", {});\n    const bar = computed(() => BAR_MAP[props.vertical ? \"vertical\" : \"horizontal\"]);\n    const barStore = ref({});\n    const cursorDown = ref(null);\n    const cursorLeave = ref(null);\n    const visible = ref(false);\n    let onselectstartStore = null;\n    const offsetRatio = computed(() => {\n      return __pow(instance.value[bar.value.offset], 2) / wrap.value[bar.value.scrollSize] / props.ratio / thumb.value[bar.value.offset];\n    });\n    const clickThumbHandler = (e) => {\n      e.stopPropagation();\n      if (e.ctrlKey || [1, 2].includes(e.button)) {\n        return;\n      }\n      window.getSelection().removeAllRanges();\n      startDrag(e);\n      barStore.value[bar.value.axis] = e.currentTarget[bar.value.offset] - (e[bar.value.client] - e.currentTarget.getBoundingClientRect()[bar.value.direction]);\n    };\n    const clickTrackHandler = (e) => {\n      const offset = Math.abs(e.target.getBoundingClientRect()[bar.value.direction] - e[bar.value.client]);\n      const thumbHalf = thumb.value[bar.value.offset] / 2;\n      const thumbPositionPercentage = (offset - thumbHalf) * 100 * offsetRatio.value / instance.value[bar.value.offset];\n      wrap.value[bar.value.scroll] = thumbPositionPercentage * wrap.value[bar.value.scrollSize] / 100;\n    };\n    const startDrag = (e) => {\n      e.stopImmediatePropagation();\n      cursorDown.value = true;\n      on(document, \"mousemove\", mouseMoveDocumentHandler);\n      on(document, \"mouseup\", mouseUpDocumentHandler);\n      onselectstartStore = document.onselectstart;\n      document.onselectstart = () => false;\n    };\n    const mouseMoveDocumentHandler = (e) => {\n      if (cursorDown.value === false)\n        return;\n      const prevPage = barStore.value[bar.value.axis];\n      if (!prevPage)\n        return;\n      const offset = (instance.value.getBoundingClientRect()[bar.value.direction] - e[bar.value.client]) * -1;\n      const thumbClickPosition = thumb.value[bar.value.offset] - prevPage;\n      const thumbPositionPercentage = (offset - thumbClickPosition) * 100 * offsetRatio.value / instance.value[bar.value.offset];\n      wrap.value[bar.value.scroll] = thumbPositionPercentage * wrap.value[bar.value.scrollSize] / 100;\n    };\n    const mouseUpDocumentHandler = () => {\n      cursorDown.value = false;\n      barStore.value[bar.value.axis] = 0;\n      off(document, \"mousemove\", mouseMoveDocumentHandler);\n      document.onselectstart = onselectstartStore;\n      if (cursorLeave.value) {\n        visible.value = false;\n      }\n    };\n    const thumbStyle = computed(() => renderThumbStyle({\n      size: props.size,\n      move: props.move,\n      bar: bar.value\n    }));\n    const mouseMoveScrollbarHandler = () => {\n      cursorLeave.value = false;\n      visible.value = !!props.size;\n    };\n    const mouseLeaveScrollbarHandler = () => {\n      cursorLeave.value = true;\n      visible.value = cursorDown.value;\n    };\n    onMounted(() => {\n      on(scrollbar.value, \"mousemove\", mouseMoveScrollbarHandler);\n      on(scrollbar.value, \"mouseleave\", mouseLeaveScrollbarHandler);\n    });\n    onBeforeUnmount(() => {\n      off(document, \"mouseup\", mouseUpDocumentHandler);\n      off(scrollbar.value, \"mousemove\", mouseMoveScrollbarHandler);\n      off(scrollbar.value, \"mouseleave\", mouseLeaveScrollbarHandler);\n    });\n    return {\n      instance,\n      thumb,\n      bar,\n      clickTrackHandler,\n      clickThumbHandler,\n      thumbStyle,\n      visible\n    };\n  }\n});\n\nfunction render(_ctx, _cache, $props, $setup, $data, $options) {\n  return openBlock(), createBlock(Transition, { name: \"el-scrollbar-fade\" }, {\n    default: withCtx(() => [\n      withDirectives(createVNode(\"div\", {\n        ref: \"instance\",\n        class: [\"el-scrollbar__bar\", \"is-\" + _ctx.bar.key],\n        onMousedown: _cache[2] || (_cache[2] = (...args) => _ctx.clickTrackHandler && _ctx.clickTrackHandler(...args))\n      }, [\n        createVNode(\"div\", {\n          ref: \"thumb\",\n          class: \"el-scrollbar__thumb\",\n          style: _ctx.thumbStyle,\n          onMousedown: _cache[1] || (_cache[1] = (...args) => _ctx.clickThumbHandler && _ctx.clickThumbHandler(...args))\n        }, null, 36)\n      ], 34), [\n        [vShow, _ctx.always || _ctx.visible]\n      ])\n    ]),\n    _: 1\n  });\n}\n\nscript.render = render;\nscript.__file = \"packages/scrollbar/src/bar.vue\";\n\nvar __pow$1 = Math.pow;\nvar script$1 = defineComponent({\n  name: \"ElScrollbar\",\n  components: { Bar: script },\n  props: {\n    height: {\n      type: [String, Number],\n      default: \"\"\n    },\n    maxHeight: {\n      type: [String, Number],\n      default: \"\"\n    },\n    native: {\n      type: Boolean,\n      default: false\n    },\n    wrapStyle: {\n      type: [String, Array],\n      default: \"\"\n    },\n    wrapClass: {\n      type: [String, Array],\n      default: \"\"\n    },\n    viewClass: {\n      type: [String, Array],\n      default: \"\"\n    },\n    viewStyle: {\n      type: [String, Array],\n      default: \"\"\n    },\n    noresize: Boolean,\n    tag: {\n      type: String,\n      default: \"div\"\n    },\n    always: {\n      type: Boolean,\n      default: false\n    },\n    minSize: {\n      type: Number,\n      default: 20\n    }\n  },\n  emits: [\"scroll\"],\n  setup(props, { emit }) {\n    const sizeWidth = ref(\"0\");\n    const sizeHeight = ref(\"0\");\n    const moveX = ref(0);\n    const moveY = ref(0);\n    const scrollbar = ref(null);\n    const wrap = ref(null);\n    const resize = ref(null);\n    const ratioY = ref(1);\n    const ratioX = ref(1);\n    const SCOPE = \"ElScrollbar\";\n    const GAP = 4;\n    provide(\"scrollbar\", scrollbar);\n    provide(\"scrollbar-wrap\", wrap);\n    const handleScroll = () => {\n      if (wrap.value) {\n        const offsetHeight = wrap.value.offsetHeight - GAP;\n        const offsetWidth = wrap.value.offsetWidth - GAP;\n        moveY.value = wrap.value.scrollTop * 100 / offsetHeight * ratioY.value;\n        moveX.value = wrap.value.scrollLeft * 100 / offsetWidth * ratioX.value;\n        emit(\"scroll\", {\n          scrollTop: wrap.value.scrollTop,\n          scrollLeft: wrap.value.scrollLeft\n        });\n      }\n    };\n    const setScrollTop = (value) => {\n      if (!isNumber(value)) {\n        if (process.env.NODE_ENV !== \"production\") {\n          warn(SCOPE, \"value must be a number\");\n        }\n        return;\n      }\n      wrap.value.scrollTop = value;\n    };\n    const setScrollLeft = (value) => {\n      if (!isNumber(value)) {\n        if (process.env.NODE_ENV !== \"production\") {\n          warn(SCOPE, \"value must be a number\");\n        }\n        return;\n      }\n      wrap.value.scrollLeft = value;\n    };\n    const update = () => {\n      if (!wrap.value)\n        return;\n      const offsetHeight = wrap.value.offsetHeight - GAP;\n      const offsetWidth = wrap.value.offsetWidth - GAP;\n      const originalHeight = __pow$1(offsetHeight, 2) / wrap.value.scrollHeight;\n      const originalWidth = __pow$1(offsetWidth, 2) / wrap.value.scrollWidth;\n      const height = Math.max(originalHeight, props.minSize);\n      const width = Math.max(originalWidth, props.minSize);\n      ratioY.value = originalHeight / (offsetHeight - originalHeight) / (height / (offsetHeight - height));\n      ratioX.value = originalWidth / (offsetWidth - originalWidth) / (width / (offsetWidth - width));\n      sizeHeight.value = height + GAP < offsetHeight ? height + \"px\" : \"\";\n      sizeWidth.value = width + GAP < offsetWidth ? width + \"px\" : \"\";\n    };\n    const style = computed(() => {\n      let style2 = props.wrapStyle;\n      if (isArray(style2)) {\n        style2 = toObject(style2);\n        style2.height = addUnit(props.height);\n        style2.maxHeight = addUnit(props.maxHeight);\n      } else if (isString(style2)) {\n        style2 += addUnit(props.height) ? `height: ${addUnit(props.height)};` : \"\";\n        style2 += addUnit(props.maxHeight) ? `max-height: ${addUnit(props.maxHeight)};` : \"\";\n      }\n      return style2;\n    });\n    onMounted(() => {\n      if (!props.native) {\n        nextTick(update);\n      }\n      if (!props.noresize) {\n        addResizeListener(resize.value, update);\n        addEventListener(\"resize\", update);\n      }\n    });\n    onBeforeUnmount(() => {\n      if (!props.noresize) {\n        removeResizeListener(resize.value, update);\n        removeEventListener(\"resize\", update);\n      }\n    });\n    return {\n      moveX,\n      moveY,\n      ratioX,\n      ratioY,\n      sizeWidth,\n      sizeHeight,\n      style,\n      scrollbar,\n      wrap,\n      resize,\n      update,\n      handleScroll,\n      setScrollTop,\n      setScrollLeft\n    };\n  }\n});\n\nconst _hoisted_1 = {\n  ref: \"scrollbar\",\n  class: \"el-scrollbar\"\n};\nfunction render$1(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_bar = resolveComponent(\"bar\");\n  return openBlock(), createBlock(\"div\", _hoisted_1, [\n    createVNode(\"div\", {\n      ref: \"wrap\",\n      class: [\n        _ctx.wrapClass,\n        \"el-scrollbar__wrap\",\n        _ctx.native ? \"\" : \"el-scrollbar__wrap--hidden-default\"\n      ],\n      style: _ctx.style,\n      onScroll: _cache[1] || (_cache[1] = (...args) => _ctx.handleScroll && _ctx.handleScroll(...args))\n    }, [\n      (openBlock(), createBlock(resolveDynamicComponent(_ctx.tag), {\n        ref: \"resize\",\n        class: [\"el-scrollbar__view\", _ctx.viewClass],\n        style: _ctx.viewStyle\n      }, {\n        default: withCtx(() => [\n          renderSlot(_ctx.$slots, \"default\")\n        ]),\n        _: 3\n      }, 8, [\"class\", \"style\"]))\n    ], 38),\n    !_ctx.native ? (openBlock(), createBlock(Fragment, { key: 0 }, [\n      createVNode(_component_bar, {\n        move: _ctx.moveX,\n        ratio: _ctx.ratioX,\n        size: _ctx.sizeWidth,\n        always: _ctx.always\n      }, null, 8, [\"move\", \"ratio\", \"size\", \"always\"]),\n      createVNode(_component_bar, {\n        move: _ctx.moveY,\n        ratio: _ctx.ratioY,\n        size: _ctx.sizeHeight,\n        vertical: \"\",\n        always: _ctx.always\n      }, null, 8, [\"move\", \"ratio\", \"size\", \"always\"])\n    ], 64)) : createCommentVNode(\"v-if\", true)\n  ], 512);\n}\n\nscript$1.render = render$1;\nscript$1.__file = \"packages/scrollbar/src/index.vue\";\n\nscript$1.install = (app) => {\n  app.component(script$1.name, script$1);\n};\nconst _Scrollbar = script$1;\n\nexport default _Scrollbar;\n"]},"metadata":{},"sourceType":"module"}