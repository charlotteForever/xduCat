{"ast":null,"code":"import { inject, computed, ref, defineComponent, onMounted, getCurrentInstance, resolveDirective, withDirectives, openBlock, createBlock, withModifiers, renderSlot } from 'vue';\nimport { ClickOutside } from '../directives';\nimport { useGlobalConfig, generateId } from '../utils/util';\nimport { EVENT_CODE } from '../utils/aria';\nimport { addClass, on } from '../utils/dom';\n\nconst useDropdown = () => {\n  const ELEMENT = useGlobalConfig();\n  const elDropdown = inject(\"elDropdown\", {});\n\n  const _elDropdownSize = computed(() => elDropdown == null ? void 0 : elDropdown.dropdownSize);\n\n  return {\n    ELEMENT,\n    elDropdown,\n    _elDropdownSize\n  };\n};\n\nconst initDropdownDomEvent = (dropdownChildren, triggerElm, _instance) => {\n  const menuItems = ref(null);\n  const menuItemsArray = ref(null);\n  const dropdownElm = ref(null);\n  const listId = ref(`dropdown-menu-${generateId()}`);\n  dropdownElm.value = dropdownChildren == null ? void 0 : dropdownChildren.subTree.el;\n\n  function removeTabindex() {\n    var _a;\n\n    triggerElm.setAttribute(\"tabindex\", \"-1\");\n    (_a = menuItemsArray.value) == null ? void 0 : _a.forEach(item => {\n      item.setAttribute(\"tabindex\", \"-1\");\n    });\n  }\n\n  function resetTabindex(ele) {\n    removeTabindex();\n    ele == null ? void 0 : ele.setAttribute(\"tabindex\", \"0\");\n  }\n\n  function handleTriggerKeyDown(ev) {\n    const code = ev.code;\n\n    if ([EVENT_CODE.up, EVENT_CODE.down].includes(code)) {\n      removeTabindex();\n      resetTabindex(menuItems.value[0]);\n      menuItems.value[0].focus();\n      ev.preventDefault();\n      ev.stopPropagation();\n    } else if (code === EVENT_CODE.enter) {\n      _instance.handleClick();\n    } else if ([EVENT_CODE.tab, EVENT_CODE.esc].includes(code)) {\n      _instance.hide();\n    }\n  }\n\n  function handleItemKeyDown(ev) {\n    const code = ev.code;\n    const target = ev.target;\n    const currentIndex = menuItemsArray.value.indexOf(target);\n    const max = menuItemsArray.value.length - 1;\n    let nextIndex;\n\n    if ([EVENT_CODE.up, EVENT_CODE.down].includes(code)) {\n      if (code === EVENT_CODE.up) {\n        nextIndex = currentIndex !== 0 ? currentIndex - 1 : 0;\n      } else {\n        nextIndex = currentIndex < max ? currentIndex + 1 : max;\n      }\n\n      removeTabindex();\n      resetTabindex(menuItems.value[nextIndex]);\n      menuItems.value[nextIndex].focus();\n      ev.preventDefault();\n      ev.stopPropagation();\n    } else if (code === EVENT_CODE.enter) {\n      triggerElmFocus();\n      target.click();\n\n      if (_instance.props.hideOnClick) {\n        _instance.hide();\n      }\n    } else if ([EVENT_CODE.tab, EVENT_CODE.esc].includes(code)) {\n      _instance.hide();\n\n      triggerElmFocus();\n    }\n  }\n\n  function initAria() {\n    dropdownElm.value.setAttribute(\"id\", listId.value);\n    triggerElm.setAttribute(\"aria-haspopup\", \"list\");\n    triggerElm.setAttribute(\"aria-controls\", listId.value);\n\n    if (!_instance.props.splitButton) {\n      triggerElm.setAttribute(\"role\", \"button\");\n      triggerElm.setAttribute(\"tabindex\", _instance.props.tabindex);\n      addClass(triggerElm, \"el-dropdown-selfdefine\");\n    }\n  }\n\n  function initEvent() {\n    on(triggerElm, \"keydown\", handleTriggerKeyDown);\n    on(dropdownElm.value, \"keydown\", handleItemKeyDown, true);\n  }\n\n  function initDomOperation() {\n    menuItems.value = dropdownElm.value.querySelectorAll(\"[tabindex='-1']\");\n    menuItemsArray.value = [].slice.call(menuItems.value);\n    initEvent();\n    initAria();\n  }\n\n  function triggerElmFocus() {\n    triggerElm.focus();\n  }\n\n  initDomOperation();\n};\n\nvar script = defineComponent({\n  name: \"ElDropdownMenu\",\n  directives: {\n    ClickOutside\n  },\n\n  setup() {\n    const {\n      _elDropdownSize,\n      elDropdown\n    } = useDropdown();\n    const size = _elDropdownSize.value;\n\n    function show() {\n      var _a;\n\n      if ([\"click\", \"contextmenu\"].includes(elDropdown.trigger.value)) return;\n      (_a = elDropdown.show) == null ? void 0 : _a.call(elDropdown);\n    }\n\n    function hide() {\n      if ([\"click\", \"contextmenu\"].includes(elDropdown.trigger.value)) return;\n\n      _hide();\n    }\n\n    function _hide() {\n      var _a;\n\n      (_a = elDropdown.hide) == null ? void 0 : _a.call(elDropdown);\n    }\n\n    onMounted(() => {\n      const dropdownMenu = getCurrentInstance();\n      initDropdownDomEvent(dropdownMenu, elDropdown.triggerElm.value, elDropdown.instance);\n    });\n    return {\n      size,\n      show,\n      hide,\n      innerHide: _hide,\n      triggerElm: elDropdown.triggerElm\n    };\n  }\n\n});\n\nfunction render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _directive_clickOutside = resolveDirective(\"clickOutside\");\n\n  return withDirectives((openBlock(), createBlock(\"ul\", {\n    class: [[_ctx.size && `el-dropdown-menu--${_ctx.size}`], \"el-dropdown-menu\"],\n    onMouseenter: _cache[1] || (_cache[1] = withModifiers((...args) => _ctx.show && _ctx.show(...args), [\"stop\"])),\n    onMouseleave: _cache[2] || (_cache[2] = withModifiers((...args) => _ctx.hide && _ctx.hide(...args), [\"stop\"]))\n  }, [renderSlot(_ctx.$slots, \"default\")], 34)), [[_directive_clickOutside, _ctx.innerHide, _ctx.triggerElm]]);\n}\n\nscript.render = render;\nscript.__file = \"packages/dropdown/src/dropdown-menu.vue\";\n\nscript.install = app => {\n  app.component(script.name, script);\n};\n\nconst _DropdownMenu = script;\nexport default _DropdownMenu;","map":{"version":3,"sources":["D:/A-大三下/web开发/xducat/xducat-client/node_modules/element-plus/es/el-dropdown-menu/index.js"],"names":["inject","computed","ref","defineComponent","onMounted","getCurrentInstance","resolveDirective","withDirectives","openBlock","createBlock","withModifiers","renderSlot","ClickOutside","useGlobalConfig","generateId","EVENT_CODE","addClass","on","useDropdown","ELEMENT","elDropdown","_elDropdownSize","dropdownSize","initDropdownDomEvent","dropdownChildren","triggerElm","_instance","menuItems","menuItemsArray","dropdownElm","listId","value","subTree","el","removeTabindex","_a","setAttribute","forEach","item","resetTabindex","ele","handleTriggerKeyDown","ev","code","up","down","includes","focus","preventDefault","stopPropagation","enter","handleClick","tab","esc","hide","handleItemKeyDown","target","currentIndex","indexOf","max","length","nextIndex","triggerElmFocus","click","props","hideOnClick","initAria","splitButton","tabindex","initEvent","initDomOperation","querySelectorAll","slice","call","script","name","directives","setup","size","show","trigger","_hide","dropdownMenu","instance","innerHide","render","_ctx","_cache","$props","$setup","$data","$options","_directive_clickOutside","class","onMouseenter","args","onMouseleave","$slots","__file","install","app","component","_DropdownMenu"],"mappings":"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","sourcesContent":["import { inject, computed, ref, defineComponent, onMounted, getCurrentInstance, resolveDirective, withDirectives, openBlock, createBlock, withModifiers, renderSlot } from 'vue';\nimport { ClickOutside } from '../directives';\nimport { useGlobalConfig, generateId } from '../utils/util';\nimport { EVENT_CODE } from '../utils/aria';\nimport { addClass, on } from '../utils/dom';\n\nconst useDropdown = () => {\n  const ELEMENT = useGlobalConfig();\n  const elDropdown = inject(\"elDropdown\", {});\n  const _elDropdownSize = computed(() => elDropdown == null ? void 0 : elDropdown.dropdownSize);\n  return {\n    ELEMENT,\n    elDropdown,\n    _elDropdownSize\n  };\n};\nconst initDropdownDomEvent = (dropdownChildren, triggerElm, _instance) => {\n  const menuItems = ref(null);\n  const menuItemsArray = ref(null);\n  const dropdownElm = ref(null);\n  const listId = ref(`dropdown-menu-${generateId()}`);\n  dropdownElm.value = dropdownChildren == null ? void 0 : dropdownChildren.subTree.el;\n  function removeTabindex() {\n    var _a;\n    triggerElm.setAttribute(\"tabindex\", \"-1\");\n    (_a = menuItemsArray.value) == null ? void 0 : _a.forEach((item) => {\n      item.setAttribute(\"tabindex\", \"-1\");\n    });\n  }\n  function resetTabindex(ele) {\n    removeTabindex();\n    ele == null ? void 0 : ele.setAttribute(\"tabindex\", \"0\");\n  }\n  function handleTriggerKeyDown(ev) {\n    const code = ev.code;\n    if ([EVENT_CODE.up, EVENT_CODE.down].includes(code)) {\n      removeTabindex();\n      resetTabindex(menuItems.value[0]);\n      menuItems.value[0].focus();\n      ev.preventDefault();\n      ev.stopPropagation();\n    } else if (code === EVENT_CODE.enter) {\n      _instance.handleClick();\n    } else if ([EVENT_CODE.tab, EVENT_CODE.esc].includes(code)) {\n      _instance.hide();\n    }\n  }\n  function handleItemKeyDown(ev) {\n    const code = ev.code;\n    const target = ev.target;\n    const currentIndex = menuItemsArray.value.indexOf(target);\n    const max = menuItemsArray.value.length - 1;\n    let nextIndex;\n    if ([EVENT_CODE.up, EVENT_CODE.down].includes(code)) {\n      if (code === EVENT_CODE.up) {\n        nextIndex = currentIndex !== 0 ? currentIndex - 1 : 0;\n      } else {\n        nextIndex = currentIndex < max ? currentIndex + 1 : max;\n      }\n      removeTabindex();\n      resetTabindex(menuItems.value[nextIndex]);\n      menuItems.value[nextIndex].focus();\n      ev.preventDefault();\n      ev.stopPropagation();\n    } else if (code === EVENT_CODE.enter) {\n      triggerElmFocus();\n      target.click();\n      if (_instance.props.hideOnClick) {\n        _instance.hide();\n      }\n    } else if ([EVENT_CODE.tab, EVENT_CODE.esc].includes(code)) {\n      _instance.hide();\n      triggerElmFocus();\n    }\n  }\n  function initAria() {\n    dropdownElm.value.setAttribute(\"id\", listId.value);\n    triggerElm.setAttribute(\"aria-haspopup\", \"list\");\n    triggerElm.setAttribute(\"aria-controls\", listId.value);\n    if (!_instance.props.splitButton) {\n      triggerElm.setAttribute(\"role\", \"button\");\n      triggerElm.setAttribute(\"tabindex\", _instance.props.tabindex);\n      addClass(triggerElm, \"el-dropdown-selfdefine\");\n    }\n  }\n  function initEvent() {\n    on(triggerElm, \"keydown\", handleTriggerKeyDown);\n    on(dropdownElm.value, \"keydown\", handleItemKeyDown, true);\n  }\n  function initDomOperation() {\n    menuItems.value = dropdownElm.value.querySelectorAll(\"[tabindex='-1']\");\n    menuItemsArray.value = [].slice.call(menuItems.value);\n    initEvent();\n    initAria();\n  }\n  function triggerElmFocus() {\n    triggerElm.focus();\n  }\n  initDomOperation();\n};\n\nvar script = defineComponent({\n  name: \"ElDropdownMenu\",\n  directives: {\n    ClickOutside\n  },\n  setup() {\n    const { _elDropdownSize, elDropdown } = useDropdown();\n    const size = _elDropdownSize.value;\n    function show() {\n      var _a;\n      if ([\"click\", \"contextmenu\"].includes(elDropdown.trigger.value))\n        return;\n      (_a = elDropdown.show) == null ? void 0 : _a.call(elDropdown);\n    }\n    function hide() {\n      if ([\"click\", \"contextmenu\"].includes(elDropdown.trigger.value))\n        return;\n      _hide();\n    }\n    function _hide() {\n      var _a;\n      (_a = elDropdown.hide) == null ? void 0 : _a.call(elDropdown);\n    }\n    onMounted(() => {\n      const dropdownMenu = getCurrentInstance();\n      initDropdownDomEvent(dropdownMenu, elDropdown.triggerElm.value, elDropdown.instance);\n    });\n    return {\n      size,\n      show,\n      hide,\n      innerHide: _hide,\n      triggerElm: elDropdown.triggerElm\n    };\n  }\n});\n\nfunction render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _directive_clickOutside = resolveDirective(\"clickOutside\");\n  return withDirectives((openBlock(), createBlock(\"ul\", {\n    class: [[_ctx.size && `el-dropdown-menu--${_ctx.size}`], \"el-dropdown-menu\"],\n    onMouseenter: _cache[1] || (_cache[1] = withModifiers((...args) => _ctx.show && _ctx.show(...args), [\"stop\"])),\n    onMouseleave: _cache[2] || (_cache[2] = withModifiers((...args) => _ctx.hide && _ctx.hide(...args), [\"stop\"]))\n  }, [\n    renderSlot(_ctx.$slots, \"default\")\n  ], 34)), [\n    [_directive_clickOutside, _ctx.innerHide, _ctx.triggerElm]\n  ]);\n}\n\nscript.render = render;\nscript.__file = \"packages/dropdown/src/dropdown-menu.vue\";\n\nscript.install = (app) => {\n  app.component(script.name, script);\n};\nconst _DropdownMenu = script;\n\nexport default _DropdownMenu;\n"]},"metadata":{},"sourceType":"module"}