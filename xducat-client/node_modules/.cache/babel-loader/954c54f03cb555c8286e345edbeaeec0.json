{"ast":null,"code":"import isServer from './isServer';\nimport { getConfig } from './config';\nimport { addClass, removeClass, on } from './dom';\nimport { EVENT_CODE } from './aria';\n\nconst onTouchMove = e => {\n  e.preventDefault();\n  e.stopPropagation();\n};\n\nconst onModalClick = () => {\n  PopupManager === null || PopupManager === void 0 ? void 0 : PopupManager.doOnModalClick();\n};\n\nlet hasModal = false;\nlet zIndex;\n\nconst getModal = function () {\n  if (isServer) return;\n  let modalDom = PopupManager.modalDom;\n\n  if (modalDom) {\n    hasModal = true;\n  } else {\n    hasModal = false;\n    modalDom = document.createElement('div');\n    PopupManager.modalDom = modalDom;\n    on(modalDom, 'touchmove', onTouchMove);\n    on(modalDom, 'click', onModalClick);\n  }\n\n  return modalDom;\n};\n\nconst instances = {};\nconst PopupManager = {\n  modalFade: true,\n  modalDom: undefined,\n  zIndex,\n  getInstance: function (id) {\n    return instances[id];\n  },\n  register: function (id, instance) {\n    if (id && instance) {\n      instances[id] = instance;\n    }\n  },\n  deregister: function (id) {\n    if (id) {\n      instances[id] = null;\n      delete instances[id];\n    }\n  },\n  nextZIndex: function () {\n    return ++PopupManager.zIndex;\n  },\n  modalStack: [],\n  doOnModalClick: function () {\n    const topItem = PopupManager.modalStack[PopupManager.modalStack.length - 1];\n    if (!topItem) return;\n    const instance = PopupManager.getInstance(topItem.id);\n\n    if (instance && instance.closeOnClickModal.value) {\n      instance.close();\n    }\n  },\n  openModal: function (id, zIndex, dom, modalClass, modalFade) {\n    if (isServer) return;\n    if (!id || zIndex === undefined) return;\n    this.modalFade = modalFade;\n    const modalStack = this.modalStack;\n\n    for (let i = 0, j = modalStack.length; i < j; i++) {\n      const item = modalStack[i];\n\n      if (item.id === id) {\n        return;\n      }\n    }\n\n    const modalDom = getModal();\n    addClass(modalDom, 'v-modal');\n\n    if (this.modalFade && !hasModal) {\n      addClass(modalDom, 'v-modal-enter');\n    }\n\n    if (modalClass) {\n      const classArr = modalClass.trim().split(/\\s+/);\n      classArr.forEach(item => addClass(modalDom, item));\n    }\n\n    setTimeout(() => {\n      removeClass(modalDom, 'v-modal-enter');\n    }, 200);\n\n    if (dom && dom.parentNode && dom.parentNode.nodeType !== 11) {\n      dom.parentNode.appendChild(modalDom);\n    } else {\n      document.body.appendChild(modalDom);\n    }\n\n    if (zIndex) {\n      modalDom.style.zIndex = String(zIndex);\n    }\n\n    modalDom.tabIndex = 0;\n    modalDom.style.display = '';\n    this.modalStack.push({\n      id: id,\n      zIndex: zIndex,\n      modalClass: modalClass\n    });\n  },\n  closeModal: function (id) {\n    const modalStack = this.modalStack;\n    const modalDom = getModal();\n\n    if (modalStack.length > 0) {\n      const topItem = modalStack[modalStack.length - 1];\n\n      if (topItem.id === id) {\n        if (topItem.modalClass) {\n          const classArr = topItem.modalClass.trim().split(/\\s+/);\n          classArr.forEach(item => removeClass(modalDom, item));\n        }\n\n        modalStack.pop();\n\n        if (modalStack.length > 0) {\n          modalDom.style.zIndex = modalStack[modalStack.length - 1].zIndex;\n        }\n      } else {\n        for (let i = modalStack.length - 1; i >= 0; i--) {\n          if (modalStack[i].id === id) {\n            modalStack.splice(i, 1);\n            break;\n          }\n        }\n      }\n    }\n\n    if (modalStack.length === 0) {\n      if (this.modalFade) {\n        addClass(modalDom, 'v-modal-leave');\n      }\n\n      setTimeout(() => {\n        if (modalStack.length === 0) {\n          if (modalDom.parentNode) modalDom.parentNode.removeChild(modalDom);\n          modalDom.style.display = 'none';\n          PopupManager.modalDom = undefined;\n        }\n\n        removeClass(modalDom, 'v-modal-leave');\n      }, 200);\n    }\n  }\n};\nObject.defineProperty(PopupManager, 'zIndex', {\n  configurable: true,\n\n  get() {\n    if (zIndex === undefined) {\n      zIndex = getConfig('zIndex') || 2000;\n    }\n\n    return zIndex;\n  },\n\n  set(value) {\n    zIndex = value;\n  }\n\n});\n\nconst getTopPopup = function () {\n  if (isServer) return;\n\n  if (PopupManager.modalStack.length > 0) {\n    const topPopup = PopupManager.modalStack[PopupManager.modalStack.length - 1];\n    if (!topPopup) return;\n    const instance = PopupManager.getInstance(topPopup.id);\n    return instance;\n  }\n};\n\nif (!isServer) {\n  on(window, 'keydown', function (event) {\n    if (event.code === EVENT_CODE.esc) {\n      const topPopup = getTopPopup();\n\n      if (topPopup && topPopup.closeOnPressEscape.value) {\n        topPopup.handleClose ? topPopup.handleClose() : topPopup.handleAction ? topPopup.handleAction('cancel') : topPopup.close();\n      }\n    }\n  });\n}\n\nexport default PopupManager;","map":{"version":3,"sources":["F:/XDUcat/XDUcat-client/node_modules/element-plus/es/utils/popup-manager.js"],"names":["isServer","getConfig","addClass","removeClass","on","EVENT_CODE","onTouchMove","e","preventDefault","stopPropagation","onModalClick","PopupManager","doOnModalClick","hasModal","zIndex","getModal","modalDom","document","createElement","instances","modalFade","undefined","getInstance","id","register","instance","deregister","nextZIndex","modalStack","topItem","length","closeOnClickModal","value","close","openModal","dom","modalClass","i","j","item","classArr","trim","split","forEach","setTimeout","parentNode","nodeType","appendChild","body","style","String","tabIndex","display","push","closeModal","pop","splice","removeChild","Object","defineProperty","configurable","get","set","getTopPopup","topPopup","window","event","code","esc","closeOnPressEscape","handleClose","handleAction"],"mappings":"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","sourcesContent":["import isServer from './isServer';\nimport { getConfig } from './config';\nimport { addClass, removeClass, on } from './dom';\nimport { EVENT_CODE } from './aria';\n\nconst onTouchMove = (e) => {\r\n    e.preventDefault();\r\n    e.stopPropagation();\r\n};\r\nconst onModalClick = () => {\r\n    PopupManager === null || PopupManager === void 0 ? void 0 : PopupManager.doOnModalClick();\r\n};\r\nlet hasModal = false;\r\nlet zIndex;\r\nconst getModal = function () {\r\n    if (isServer)\r\n        return;\r\n    let modalDom = PopupManager.modalDom;\r\n    if (modalDom) {\r\n        hasModal = true;\r\n    }\r\n    else {\r\n        hasModal = false;\r\n        modalDom = document.createElement('div');\r\n        PopupManager.modalDom = modalDom;\r\n        on(modalDom, 'touchmove', onTouchMove);\r\n        on(modalDom, 'click', onModalClick);\r\n    }\r\n    return modalDom;\r\n};\r\nconst instances = {};\r\nconst PopupManager = {\r\n    modalFade: true,\r\n    modalDom: undefined,\r\n    zIndex,\r\n    getInstance: function (id) {\r\n        return instances[id];\r\n    },\r\n    register: function (id, instance) {\r\n        if (id && instance) {\r\n            instances[id] = instance;\r\n        }\r\n    },\r\n    deregister: function (id) {\r\n        if (id) {\r\n            instances[id] = null;\r\n            delete instances[id];\r\n        }\r\n    },\r\n    nextZIndex: function () {\r\n        return ++PopupManager.zIndex;\r\n    },\r\n    modalStack: [],\r\n    doOnModalClick: function () {\r\n        const topItem = PopupManager.modalStack[PopupManager.modalStack.length - 1];\r\n        if (!topItem)\r\n            return;\r\n        const instance = PopupManager.getInstance(topItem.id);\r\n        if (instance && instance.closeOnClickModal.value) {\r\n            instance.close();\r\n        }\r\n    },\r\n    openModal: function (id, zIndex, dom, modalClass, modalFade) {\r\n        if (isServer)\r\n            return;\r\n        if (!id || zIndex === undefined)\r\n            return;\r\n        this.modalFade = modalFade;\r\n        const modalStack = this.modalStack;\r\n        for (let i = 0, j = modalStack.length; i < j; i++) {\r\n            const item = modalStack[i];\r\n            if (item.id === id) {\r\n                return;\r\n            }\r\n        }\r\n        const modalDom = getModal();\r\n        addClass(modalDom, 'v-modal');\r\n        if (this.modalFade && !hasModal) {\r\n            addClass(modalDom, 'v-modal-enter');\r\n        }\r\n        if (modalClass) {\r\n            const classArr = modalClass.trim().split(/\\s+/);\r\n            classArr.forEach(item => addClass(modalDom, item));\r\n        }\r\n        setTimeout(() => {\r\n            removeClass(modalDom, 'v-modal-enter');\r\n        }, 200);\r\n        if (dom && dom.parentNode && dom.parentNode.nodeType !== 11) {\r\n            dom.parentNode.appendChild(modalDom);\r\n        }\r\n        else {\r\n            document.body.appendChild(modalDom);\r\n        }\r\n        if (zIndex) {\r\n            modalDom.style.zIndex = String(zIndex);\r\n        }\r\n        modalDom.tabIndex = 0;\r\n        modalDom.style.display = '';\r\n        this.modalStack.push({ id: id, zIndex: zIndex, modalClass: modalClass });\r\n    },\r\n    closeModal: function (id) {\r\n        const modalStack = this.modalStack;\r\n        const modalDom = getModal();\r\n        if (modalStack.length > 0) {\r\n            const topItem = modalStack[modalStack.length - 1];\r\n            if (topItem.id === id) {\r\n                if (topItem.modalClass) {\r\n                    const classArr = topItem.modalClass.trim().split(/\\s+/);\r\n                    classArr.forEach(item => removeClass(modalDom, item));\r\n                }\r\n                modalStack.pop();\r\n                if (modalStack.length > 0) {\r\n                    modalDom.style.zIndex = modalStack[modalStack.length - 1].zIndex;\r\n                }\r\n            }\r\n            else {\r\n                for (let i = modalStack.length - 1; i >= 0; i--) {\r\n                    if (modalStack[i].id === id) {\r\n                        modalStack.splice(i, 1);\r\n                        break;\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        if (modalStack.length === 0) {\r\n            if (this.modalFade) {\r\n                addClass(modalDom, 'v-modal-leave');\r\n            }\r\n            setTimeout(() => {\r\n                if (modalStack.length === 0) {\r\n                    if (modalDom.parentNode)\r\n                        modalDom.parentNode.removeChild(modalDom);\r\n                    modalDom.style.display = 'none';\r\n                    PopupManager.modalDom = undefined;\r\n                }\r\n                removeClass(modalDom, 'v-modal-leave');\r\n            }, 200);\r\n        }\r\n    },\r\n};\r\nObject.defineProperty(PopupManager, 'zIndex', {\r\n    configurable: true,\r\n    get() {\r\n        if (zIndex === undefined) {\r\n            zIndex = getConfig('zIndex') || 2000;\r\n        }\r\n        return zIndex;\r\n    },\r\n    set(value) {\r\n        zIndex = value;\r\n    },\r\n});\r\nconst getTopPopup = function () {\r\n    if (isServer)\r\n        return;\r\n    if (PopupManager.modalStack.length > 0) {\r\n        const topPopup = PopupManager.modalStack[PopupManager.modalStack.length - 1];\r\n        if (!topPopup)\r\n            return;\r\n        const instance = PopupManager.getInstance(topPopup.id);\r\n        return instance;\r\n    }\r\n};\r\nif (!isServer) {\r\n    on(window, 'keydown', function (event) {\r\n        if (event.code === EVENT_CODE.esc) {\r\n            const topPopup = getTopPopup();\r\n            if (topPopup && topPopup.closeOnPressEscape.value) {\r\n                topPopup.handleClose\r\n                    ? topPopup.handleClose()\r\n                    : topPopup.handleAction\r\n                        ? topPopup.handleAction('cancel')\r\n                        : topPopup.close();\r\n            }\r\n        }\r\n    });\r\n}\n\nexport default PopupManager;\n"]},"metadata":{},"sourceType":"module"}