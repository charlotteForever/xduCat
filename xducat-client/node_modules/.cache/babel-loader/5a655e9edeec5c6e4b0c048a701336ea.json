{"ast":null,"code":"import { defineComponent, ref, resolveComponent, openBlock, createBlock, TransitionGroup, withCtx, Fragment, renderList, withKeys, renderSlot, createCommentVNode, createVNode, createTextVNode, toDisplayString, inject, withModifiers, watch, computed, provide, getCurrentInstance, onBeforeUnmount, h } from 'vue';\nimport { elFormKey } from '../el-form';\nimport { useLocaleInject } from '../hooks';\nimport ElProgress from '../el-progress';\nimport cloneDeep from 'lodash/cloneDeep';\n/**\n * Make a map and return a function for checking if a key\n * is in that map.\n * IMPORTANT: all calls of this function must be prefixed with\n * \\/\\*#\\_\\_PURE\\_\\_\\*\\/\n * So that rollup can tree-shake them if necessary.\n */\n\nconst EMPTY_OBJ = process.env.NODE_ENV !== 'production' ? Object.freeze({}) : {};\nconst EMPTY_ARR = process.env.NODE_ENV !== 'production' ? Object.freeze([]) : [];\n\nconst NOOP = () => {};\n\nconst hasOwnProperty = Object.prototype.hasOwnProperty;\n\nconst hasOwn = (val, key) => hasOwnProperty.call(val, key);\n\nfunction getError(action, option, xhr) {\n  let msg;\n\n  if (xhr.response) {\n    msg = `${xhr.response.error || xhr.response}`;\n  } else if (xhr.responseText) {\n    msg = `${xhr.responseText}`;\n  } else {\n    msg = `fail to post ${action} ${xhr.status}`;\n  }\n\n  const err = new Error(msg);\n  err.status = xhr.status;\n  err.method = \"post\";\n  err.url = action;\n  return err;\n}\n\nfunction getBody(xhr) {\n  const text = xhr.responseText || xhr.response;\n\n  if (!text) {\n    return text;\n  }\n\n  try {\n    return JSON.parse(text);\n  } catch (e) {\n    return text;\n  }\n}\n\nfunction upload(option) {\n  if (typeof XMLHttpRequest === \"undefined\") {\n    return;\n  }\n\n  const xhr = new XMLHttpRequest();\n  const action = option.action;\n\n  if (xhr.upload) {\n    xhr.upload.onprogress = function progress(e) {\n      if (e.total > 0) {\n        e.percent = e.loaded / e.total * 100;\n      }\n\n      option.onProgress(e);\n    };\n  }\n\n  const formData = new FormData();\n\n  if (option.data) {\n    Object.keys(option.data).forEach(key => {\n      formData.append(key, option.data[key]);\n    });\n  }\n\n  formData.append(option.filename, option.file, option.file.name);\n\n  xhr.onerror = function error() {\n    option.onError(getError(action, option, xhr));\n  };\n\n  xhr.onload = function onload() {\n    if (xhr.status < 200 || xhr.status >= 300) {\n      return option.onError(getError(action, option, xhr));\n    }\n\n    option.onSuccess(getBody(xhr));\n  };\n\n  xhr.open(\"post\", action, true);\n\n  if (option.withCredentials && \"withCredentials\" in xhr) {\n    xhr.withCredentials = true;\n  }\n\n  const headers = option.headers || {};\n\n  for (const item in headers) {\n    if (hasOwn(headers, item) && headers[item] !== null) {\n      xhr.setRequestHeader(item, headers[item]);\n    }\n  }\n\n  xhr.send(formData);\n  return xhr;\n}\n\nvar script = defineComponent({\n  name: \"ElUploadList\",\n  components: {\n    ElProgress\n  },\n  props: {\n    files: {\n      type: Array,\n      default: () => []\n    },\n    disabled: {\n      type: Boolean,\n      default: false\n    },\n    handlePreview: {\n      type: Function,\n      default: () => NOOP\n    },\n    listType: {\n      type: String,\n      default: \"text\"\n    }\n  },\n  emits: [\"remove\"],\n\n  setup(props, {\n    emit\n  }) {\n    const {\n      t\n    } = useLocaleInject();\n\n    const parsePercentage = val => {\n      return parseInt(val, 10);\n    };\n\n    const handleClick = file => {\n      props.handlePreview(file);\n    };\n\n    const onFileClicked = e => {\n      e.target.focus();\n    };\n\n    const handleRemove = (e, file) => {\n      emit(\"remove\", file);\n    };\n\n    return {\n      focusing: ref(false),\n      parsePercentage,\n      handleClick,\n      handleRemove,\n      onFileClicked,\n      t\n    };\n  }\n\n});\n\nconst _hoisted_1 = /* @__PURE__ */createVNode(\"i\", {\n  class: \"el-icon-document\"\n}, null, -1);\n\nconst _hoisted_2 = {\n  class: \"el-upload-list__item-status-label\"\n};\nconst _hoisted_3 = {\n  key: 2,\n  class: \"el-icon-close-tip\"\n};\nconst _hoisted_4 = {\n  key: 4,\n  class: \"el-upload-list__item-actions\"\n};\n\nconst _hoisted_5 = /* @__PURE__ */createVNode(\"i\", {\n  class: \"el-icon-zoom-in\"\n}, null, -1);\n\nconst _hoisted_6 = /* @__PURE__ */createVNode(\"i\", {\n  class: \"el-icon-delete\"\n}, null, -1);\n\nfunction render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_el_progress = resolveComponent(\"el-progress\");\n\n  return openBlock(), createBlock(TransitionGroup, {\n    tag: \"ul\",\n    class: [\"el-upload-list\", \"el-upload-list--\" + _ctx.listType, {\n      \"is-disabled\": _ctx.disabled\n    }],\n    name: \"el-list\"\n  }, {\n    default: withCtx(() => [(openBlock(true), createBlock(Fragment, null, renderList(_ctx.files, file => {\n      return openBlock(), createBlock(\"li\", {\n        key: file.uid || file,\n        class: [\"el-upload-list__item\", \"is-\" + file.status, _ctx.focusing ? \"focusing\" : \"\"],\n        tabindex: \"0\",\n        onKeydown: withKeys($event => !_ctx.disabled && _ctx.handleRemove($event, file), [\"delete\"]),\n        onFocus: _cache[1] || (_cache[1] = $event => _ctx.focusing = true),\n        onBlur: _cache[2] || (_cache[2] = $event => _ctx.focusing = false),\n        onClick: _cache[3] || (_cache[3] = (...args) => _ctx.onFileClicked && _ctx.onFileClicked(...args))\n      }, [renderSlot(_ctx.$slots, \"default\", {\n        file\n      }, () => [file.status !== \"uploading\" && [\"picture-card\", \"picture\"].includes(_ctx.listType) ? (openBlock(), createBlock(\"img\", {\n        key: 0,\n        class: \"el-upload-list__item-thumbnail\",\n        src: file.url,\n        alt: \"\"\n      }, null, 8, [\"src\"])) : createCommentVNode(\"v-if\", true), createVNode(\"a\", {\n        class: \"el-upload-list__item-name\",\n        onClick: $event => _ctx.handleClick(file)\n      }, [_hoisted_1, createTextVNode(toDisplayString(file.name), 1)], 8, [\"onClick\"]), createVNode(\"label\", _hoisted_2, [createVNode(\"i\", {\n        class: {\n          \"el-icon-upload-success\": true,\n          \"el-icon-circle-check\": _ctx.listType === \"text\",\n          \"el-icon-check\": [\"picture-card\", \"picture\"].includes(_ctx.listType)\n        }\n      }, null, 2)]), !_ctx.disabled ? (openBlock(), createBlock(\"i\", {\n        key: 1,\n        class: \"el-icon-close\",\n        onClick: $event => _ctx.handleRemove($event, file)\n      }, null, 8, [\"onClick\"])) : createCommentVNode(\"v-if\", true), createCommentVNode(\" Due to close btn only appears when li gets focused disappears after li gets blurred, thus keyboard navigation can never reach close btn\"), createCommentVNode(\" This is a bug which needs to be fixed \"), createCommentVNode(\" TODO: Fix the incorrect navigation interaction \"), !_ctx.disabled ? (openBlock(), createBlock(\"i\", _hoisted_3, toDisplayString(_ctx.t(\"el.upload.deleteTip\")), 1)) : createCommentVNode(\"v-if\", true), file.status === \"uploading\" ? (openBlock(), createBlock(_component_el_progress, {\n        key: 3,\n        type: _ctx.listType === \"picture-card\" ? \"circle\" : \"line\",\n        \"stroke-width\": _ctx.listType === \"picture-card\" ? 6 : 2,\n        percentage: _ctx.parsePercentage(file.percentage)\n      }, null, 8, [\"type\", \"stroke-width\", \"percentage\"])) : createCommentVNode(\"v-if\", true), _ctx.listType === \"picture-card\" ? (openBlock(), createBlock(\"span\", _hoisted_4, [createVNode(\"span\", {\n        class: \"el-upload-list__item-preview\",\n        onClick: $event => _ctx.handlePreview(file)\n      }, [_hoisted_5], 8, [\"onClick\"]), !_ctx.disabled ? (openBlock(), createBlock(\"span\", {\n        key: 0,\n        class: \"el-upload-list__item-delete\",\n        onClick: $event => _ctx.handleRemove($event, file)\n      }, [_hoisted_6], 8, [\"onClick\"])) : createCommentVNode(\"v-if\", true)])) : createCommentVNode(\"v-if\", true)])], 42, [\"onKeydown\"]);\n    }), 128))]),\n    _: 3\n  }, 8, [\"class\"]);\n}\n\nscript.render = render;\nscript.__file = \"packages/upload/src/upload-list.vue\";\nvar script$1 = defineComponent({\n  name: \"ElUploadDrag\",\n  props: {\n    disabled: {\n      type: Boolean,\n      default: false\n    }\n  },\n  emits: [\"file\"],\n\n  setup(props, {\n    emit\n  }) {\n    const uploader = inject(\"uploader\", {});\n    const dragover = ref(false);\n\n    function onDrop(e) {\n      if (props.disabled || !uploader) return;\n      const accept = uploader.accept;\n      dragover.value = false;\n\n      if (!accept) {\n        emit(\"file\", e.dataTransfer.files);\n        return;\n      }\n\n      emit(\"file\", Array.from(e.dataTransfer.files).filter(file => {\n        const {\n          type,\n          name\n        } = file;\n        const extension = name.indexOf(\".\") > -1 ? `.${name.split(\".\").pop()}` : \"\";\n        const baseType = type.replace(/\\/.*$/, \"\");\n        return accept.split(\",\").map(type2 => type2.trim()).filter(type2 => type2).some(acceptedType => {\n          if (acceptedType.startsWith(\".\")) {\n            return extension === acceptedType;\n          }\n\n          if (/\\/\\*$/.test(acceptedType)) {\n            return baseType === acceptedType.replace(/\\/\\*$/, \"\");\n          }\n\n          if (/^[^\\/]+\\/[^\\/]+$/.test(acceptedType)) {\n            return type === acceptedType;\n          }\n\n          return false;\n        });\n      }));\n    }\n\n    function onDragover() {\n      if (!props.disabled) dragover.value = true;\n    }\n\n    return {\n      dragover,\n      onDrop,\n      onDragover\n    };\n  }\n\n});\n\nfunction render$1(_ctx, _cache, $props, $setup, $data, $options) {\n  return openBlock(), createBlock(\"div\", {\n    class: {\n      \"el-upload-dragger\": true,\n      \"is-dragover\": _ctx.dragover\n    },\n    onDrop: _cache[1] || (_cache[1] = withModifiers((...args) => _ctx.onDrop && _ctx.onDrop(...args), [\"prevent\"])),\n    onDragover: _cache[2] || (_cache[2] = withModifiers((...args) => _ctx.onDragover && _ctx.onDragover(...args), [\"prevent\"])),\n    onDragleave: _cache[3] || (_cache[3] = withModifiers($event => _ctx.dragover = false, [\"prevent\"]))\n  }, [renderSlot(_ctx.$slots, \"default\")], 34);\n}\n\nscript$1.render = render$1;\nscript$1.__file = \"packages/upload/src/upload-dragger.vue\";\nvar script$2 = defineComponent({\n  components: {\n    UploadDragger: script$1\n  },\n  props: {\n    type: {\n      type: String,\n      default: \"\"\n    },\n    action: {\n      type: String,\n      required: true\n    },\n    name: {\n      type: String,\n      default: \"file\"\n    },\n    data: {\n      type: Object,\n      default: () => null\n    },\n    headers: {\n      type: Object,\n      default: () => null\n    },\n    withCredentials: {\n      type: Boolean,\n      default: false\n    },\n    multiple: {\n      type: Boolean,\n      default: null\n    },\n    accept: {\n      type: String,\n      default: \"\"\n    },\n    onStart: {\n      type: Function,\n      default: NOOP\n    },\n    onProgress: {\n      type: Function,\n      default: NOOP\n    },\n    onSuccess: {\n      type: Function,\n      default: NOOP\n    },\n    onError: {\n      type: Function,\n      default: NOOP\n    },\n    beforeUpload: {\n      type: Function,\n      default: NOOP\n    },\n    drag: {\n      type: Boolean,\n      default: false\n    },\n    onPreview: {\n      type: Function,\n      default: NOOP\n    },\n    onRemove: {\n      type: Function,\n      default: NOOP\n    },\n    fileList: {\n      type: Array,\n      default: () => []\n    },\n    autoUpload: {\n      type: Boolean,\n      default: true\n    },\n    listType: {\n      type: String,\n      default: \"text\"\n    },\n    httpRequest: {\n      type: Function,\n      default: () => upload\n    },\n    disabled: Boolean,\n    limit: {\n      type: Number,\n      default: null\n    },\n    onExceed: {\n      type: Function,\n      default: NOOP\n    }\n  },\n\n  setup(props) {\n    const reqs = ref({});\n    const mouseover = ref(false);\n    const inputRef = ref(null);\n\n    function uploadFiles(files) {\n      if (props.limit && props.fileList.length + files.length > props.limit) {\n        props.onExceed(files, props.fileList);\n        return;\n      }\n\n      let postFiles = Array.from(files);\n\n      if (!props.multiple) {\n        postFiles = postFiles.slice(0, 1);\n      }\n\n      if (postFiles.length === 0) {\n        return;\n      }\n\n      postFiles.forEach(rawFile => {\n        props.onStart(rawFile);\n        if (props.autoUpload) upload(rawFile);\n      });\n    }\n\n    function upload(rawFile) {\n      inputRef.value.value = null;\n\n      if (!props.beforeUpload) {\n        return post(rawFile);\n      }\n\n      const before = props.beforeUpload(rawFile);\n\n      if (before instanceof Promise) {\n        before.then(processedFile => {\n          const fileType = Object.prototype.toString.call(processedFile);\n\n          if (fileType === \"[object File]\" || fileType === \"[object Blob]\") {\n            if (fileType === \"[object Blob]\") {\n              processedFile = new File([processedFile], rawFile.name, {\n                type: rawFile.type\n              });\n            }\n\n            for (const p in rawFile) {\n              if (hasOwn(rawFile, p)) {\n                processedFile[p] = rawFile[p];\n              }\n            }\n\n            post(processedFile);\n          } else {\n            post(rawFile);\n          }\n        }).catch(() => {\n          props.onRemove(null, rawFile);\n        });\n      } else if (before !== false) {\n        post(rawFile);\n      } else {\n        props.onRemove(null, rawFile);\n      }\n    }\n\n    function abort(file) {\n      const _reqs = reqs.value;\n\n      if (file) {\n        let uid = file;\n        if (file.uid) uid = file.uid;\n\n        if (_reqs[uid]) {\n          _reqs[uid].abort();\n        }\n      } else {\n        Object.keys(_reqs).forEach(uid => {\n          if (_reqs[uid]) _reqs[uid].abort();\n          delete _reqs[uid];\n        });\n      }\n    }\n\n    function post(rawFile) {\n      const {\n        uid\n      } = rawFile;\n      const options = {\n        headers: props.headers,\n        withCredentials: props.withCredentials,\n        file: rawFile,\n        data: props.data,\n        filename: props.name,\n        action: props.action,\n        onProgress: e => {\n          props.onProgress(e, rawFile);\n        },\n        onSuccess: res => {\n          props.onSuccess(res, rawFile);\n          delete reqs.value[uid];\n        },\n        onError: err => {\n          props.onError(err, rawFile);\n          delete reqs.value[uid];\n        }\n      };\n      const req = props.httpRequest(options);\n      reqs.value[uid] = req;\n\n      if (req instanceof Promise) {\n        req.then(options.onSuccess, options.onError);\n      }\n    }\n\n    function handleChange(e) {\n      const files = e.target.files;\n      if (!files) return;\n      uploadFiles(files);\n    }\n\n    function handleClick() {\n      if (!props.disabled) {\n        inputRef.value.value = null;\n        inputRef.value.click();\n      }\n    }\n\n    function handleKeydown() {\n      handleClick();\n    }\n\n    return {\n      reqs,\n      mouseover,\n      inputRef,\n      abort,\n      post,\n      handleChange,\n      handleClick,\n      handleKeydown,\n      upload,\n      uploadFiles\n    };\n  }\n\n});\n\nfunction render$2(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_upload_dragger = resolveComponent(\"upload-dragger\");\n\n  return openBlock(), createBlock(\"div\", {\n    class: [\"el-upload\", `el-upload--${_ctx.listType}`],\n    tabindex: \"0\",\n    onClick: _cache[2] || (_cache[2] = (...args) => _ctx.handleClick && _ctx.handleClick(...args)),\n    onKeydown: _cache[3] || (_cache[3] = withKeys(withModifiers((...args) => _ctx.handleKeydown && _ctx.handleKeydown(...args), [\"self\"]), [\"enter\", \"space\"]))\n  }, [_ctx.drag ? (openBlock(), createBlock(_component_upload_dragger, {\n    key: 0,\n    disabled: _ctx.disabled,\n    onFile: _ctx.uploadFiles\n  }, {\n    default: withCtx(() => [renderSlot(_ctx.$slots, \"default\")]),\n    _: 3\n  }, 8, [\"disabled\", \"onFile\"])) : renderSlot(_ctx.$slots, \"default\", {\n    key: 1\n  }), createVNode(\"input\", {\n    ref: \"inputRef\",\n    class: \"el-upload__input\",\n    type: \"file\",\n    name: _ctx.name,\n    multiple: _ctx.multiple,\n    accept: _ctx.accept,\n    onChange: _cache[1] || (_cache[1] = (...args) => _ctx.handleChange && _ctx.handleChange(...args))\n  }, null, 40, [\"name\", \"multiple\", \"accept\"])], 34);\n}\n\nscript$2.render = render$2;\nscript$2.__file = \"packages/upload/src/upload.vue\";\nvar __defProp = Object.defineProperty;\nvar __defProps = Object.defineProperties;\nvar __getOwnPropDescs = Object.getOwnPropertyDescriptors;\nvar __getOwnPropSymbols = Object.getOwnPropertySymbols;\nvar __hasOwnProp = Object.prototype.hasOwnProperty;\nvar __propIsEnum = Object.prototype.propertyIsEnumerable;\n\nvar __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, {\n  enumerable: true,\n  configurable: true,\n  writable: true,\n  value\n}) : obj[key] = value;\n\nvar __spreadValues = (a, b) => {\n  for (var prop in b || (b = {})) if (__hasOwnProp.call(b, prop)) __defNormalProp(a, prop, b[prop]);\n\n  if (__getOwnPropSymbols) for (var prop of __getOwnPropSymbols(b)) {\n    if (__propIsEnum.call(b, prop)) __defNormalProp(a, prop, b[prop]);\n  }\n  return a;\n};\n\nvar __spreadProps = (a, b) => __defProps(a, __getOwnPropDescs(b));\n\nfunction getFile(rawFile, uploadFiles) {\n  return uploadFiles.find(file => file.uid === rawFile.uid);\n}\n\nfunction genUid(seed) {\n  return Date.now() + seed;\n}\n\nvar useHandlers = props => {\n  const uploadFiles = ref([]);\n  const uploadRef = ref(null);\n  let tempIndex = 1;\n\n  function abort(file) {\n    uploadRef.value.abort(file);\n  }\n\n  function clearFiles() {\n    uploadFiles.value = [];\n  }\n\n  function handleError(err, rawFile) {\n    const file = getFile(rawFile, uploadFiles.value);\n    file.status = \"fail\";\n    uploadFiles.value.splice(uploadFiles.value.indexOf(file), 1);\n    props.onError(err, file, uploadFiles.value);\n    props.onChange(file, uploadFiles.value);\n  }\n\n  function handleProgress(ev, rawFile) {\n    const file = getFile(rawFile, uploadFiles.value);\n    props.onProgress(ev, file, uploadFiles.value);\n    file.status = \"uploading\";\n    file.percentage = ev.percent || 0;\n  }\n\n  function handleSuccess(res, rawFile) {\n    const file = getFile(rawFile, uploadFiles.value);\n\n    if (file) {\n      file.status = \"success\";\n      file.response = res;\n      props.onSuccess(res, file, uploadFiles.value);\n      props.onChange(file, uploadFiles.value);\n    }\n  }\n\n  function handleStart(rawFile) {\n    const uid = genUid(tempIndex++);\n    rawFile.uid = uid;\n    const file = {\n      name: rawFile.name,\n      percentage: 0,\n      status: \"ready\",\n      size: rawFile.size,\n      raw: rawFile,\n      uid\n    };\n\n    if (props.listType === \"picture-card\" || props.listType === \"picture\") {\n      try {\n        file.url = URL.createObjectURL(rawFile);\n      } catch (err) {\n        console.error(\"[Element Error][Upload]\", err);\n        props.onError(err, file, uploadFiles.value);\n      }\n    }\n\n    uploadFiles.value.push(file);\n    props.onChange(file, uploadFiles.value);\n  }\n\n  function handleRemove(file, raw) {\n    if (raw) {\n      file = getFile(raw, uploadFiles.value);\n    }\n\n    const doRemove = () => {\n      abort(file);\n      const fileList = uploadFiles.value;\n      fileList.splice(fileList.indexOf(file), 1);\n      props.onRemove(file, fileList);\n    };\n\n    if (!props.beforeRemove) {\n      doRemove();\n    } else if (typeof props.beforeRemove === \"function\") {\n      const before = props.beforeRemove(file, uploadFiles.value);\n\n      if (before instanceof Promise) {\n        before.then(() => {\n          doRemove();\n        }).catch(NOOP);\n      } else if (before !== false) {\n        doRemove();\n      }\n    }\n  }\n\n  function submit() {\n    uploadFiles.value.filter(file => file.status === \"ready\").forEach(file => {\n      uploadRef.value.upload(file.raw);\n    });\n  }\n\n  watch(() => props.listType, val => {\n    if (val === \"picture-card\" || val === \"picture\") {\n      uploadFiles.value = uploadFiles.value.map(file => {\n        if (!file.url && file.raw) {\n          try {\n            file.url = URL.createObjectURL(file.raw);\n          } catch (err) {\n            props.onError(err, file, uploadFiles.value);\n          }\n        }\n\n        return file;\n      });\n    }\n  });\n  watch(() => props.fileList, fileList => {\n    uploadFiles.value = fileList.map(file => {\n      const cloneFile = cloneDeep(file);\n      return __spreadProps(__spreadValues({}, cloneFile), {\n        uid: file.uid || genUid(tempIndex++),\n        status: file.status || \"success\"\n      });\n    });\n  }, {\n    immediate: true,\n    deep: true\n  });\n  return {\n    abort,\n    clearFiles,\n    handleError,\n    handleProgress,\n    handleStart,\n    handleSuccess,\n    handleRemove,\n    submit,\n    uploadFiles,\n    uploadRef\n  };\n};\n\nvar script$3 = defineComponent({\n  name: \"ElUpload\",\n  components: {\n    Upload: script$2,\n    UploadList: script\n  },\n  props: {\n    action: {\n      type: String,\n      required: true\n    },\n    headers: {\n      type: Object,\n      default: () => ({})\n    },\n    data: {\n      type: Object,\n      default: () => ({})\n    },\n    multiple: {\n      type: Boolean,\n      default: false\n    },\n    name: {\n      type: String,\n      default: \"file\"\n    },\n    drag: {\n      type: Boolean,\n      default: false\n    },\n    withCredentials: Boolean,\n    showFileList: {\n      type: Boolean,\n      default: true\n    },\n    accept: {\n      type: String,\n      default: \"\"\n    },\n    type: {\n      type: String,\n      default: \"select\"\n    },\n    beforeUpload: {\n      type: Function,\n      default: NOOP\n    },\n    beforeRemove: {\n      type: Function,\n      default: NOOP\n    },\n    onRemove: {\n      type: Function,\n      default: NOOP\n    },\n    onChange: {\n      type: Function,\n      default: NOOP\n    },\n    onPreview: {\n      type: Function,\n      default: NOOP\n    },\n    onSuccess: {\n      type: Function,\n      default: NOOP\n    },\n    onProgress: {\n      type: Function,\n      default: NOOP\n    },\n    onError: {\n      type: Function,\n      default: NOOP\n    },\n    fileList: {\n      type: Array,\n      default: () => {\n        return [];\n      }\n    },\n    autoUpload: {\n      type: Boolean,\n      default: true\n    },\n    listType: {\n      type: String,\n      default: \"text\"\n    },\n    httpRequest: {\n      type: Function,\n      default: upload\n    },\n    disabled: Boolean,\n    limit: {\n      type: Number,\n      default: null\n    },\n    onExceed: {\n      type: Function,\n      default: () => NOOP\n    }\n  },\n\n  setup(props) {\n    const elForm = inject(elFormKey, {});\n    const uploadDisabled = computed(() => {\n      return props.disabled || elForm.disabled;\n    });\n    const {\n      abort,\n      clearFiles,\n      handleError,\n      handleProgress,\n      handleStart,\n      handleSuccess,\n      handleRemove,\n      submit,\n      uploadRef,\n      uploadFiles\n    } = useHandlers(props);\n    provide(\"uploader\", getCurrentInstance());\n    onBeforeUnmount(() => {\n      uploadFiles.value.forEach(file => {\n        if (file.url && file.url.indexOf(\"blob:\") === 0) {\n          URL.revokeObjectURL(file.url);\n        }\n      });\n    });\n    return {\n      abort,\n      dragOver: ref(false),\n      draging: ref(false),\n      handleError,\n      handleProgress,\n      handleRemove,\n      handleStart,\n      handleSuccess,\n      uploadDisabled,\n      uploadFiles,\n      uploadRef,\n      submit,\n      clearFiles\n    };\n  },\n\n  render() {\n    var _a, _b;\n\n    let uploadList;\n\n    if (this.showFileList) {\n      uploadList = h(script, {\n        disabled: this.uploadDisabled,\n        listType: this.listType,\n        files: this.uploadFiles,\n        onRemove: this.handleRemove,\n        handlePreview: this.onPreview\n      }, this.$slots.file ? {\n        default: props => {\n          return this.$slots.file({\n            file: props.file\n          });\n        }\n      } : null);\n    } else {\n      uploadList = null;\n    }\n\n    const uploadData = {\n      type: this.type,\n      drag: this.drag,\n      action: this.action,\n      multiple: this.multiple,\n      \"before-upload\": this.beforeUpload,\n      \"with-credentials\": this.withCredentials,\n      headers: this.headers,\n      name: this.name,\n      data: this.data,\n      accept: this.accept,\n      fileList: this.uploadFiles,\n      autoUpload: this.autoUpload,\n      listType: this.listType,\n      disabled: this.uploadDisabled,\n      limit: this.limit,\n      \"on-exceed\": this.onExceed,\n      \"on-start\": this.handleStart,\n      \"on-progress\": this.handleProgress,\n      \"on-success\": this.handleSuccess,\n      \"on-error\": this.handleError,\n      \"on-preview\": this.onPreview,\n      \"on-remove\": this.handleRemove,\n      \"http-request\": this.httpRequest,\n      ref: \"uploadRef\"\n    };\n    const trigger = this.$slots.trigger || this.$slots.default;\n    const uploadComponent = h(script$2, uploadData, {\n      default: () => trigger == null ? void 0 : trigger()\n    });\n    return h(\"div\", [this.listType === \"picture-card\" ? uploadList : null, this.$slots.trigger ? [uploadComponent, this.$slots.default()] : uploadComponent, (_b = (_a = this.$slots).tip) == null ? void 0 : _b.call(_a), this.listType !== \"picture-card\" ? uploadList : null]);\n  }\n\n});\nscript$3.__file = \"packages/upload/src/index.vue\";\n\nscript$3.install = app => {\n  app.component(script$3.name, script$3);\n};\n\nconst _Upload = script$3;\nexport default _Upload;","map":{"version":3,"sources":["D:/A-大三下/web开发/xducat/xducat-client/node_modules/element-plus/es/el-upload/index.js"],"names":["defineComponent","ref","resolveComponent","openBlock","createBlock","TransitionGroup","withCtx","Fragment","renderList","withKeys","renderSlot","createCommentVNode","createVNode","createTextVNode","toDisplayString","inject","withModifiers","watch","computed","provide","getCurrentInstance","onBeforeUnmount","h","elFormKey","useLocaleInject","ElProgress","cloneDeep","EMPTY_OBJ","process","env","NODE_ENV","Object","freeze","EMPTY_ARR","NOOP","hasOwnProperty","prototype","hasOwn","val","key","call","getError","action","option","xhr","msg","response","error","responseText","status","err","Error","method","url","getBody","text","JSON","parse","e","upload","XMLHttpRequest","onprogress","progress","total","percent","loaded","onProgress","formData","FormData","data","keys","forEach","append","filename","file","name","onerror","onError","onload","onSuccess","open","withCredentials","headers","item","setRequestHeader","send","script","components","props","files","type","Array","default","disabled","Boolean","handlePreview","Function","listType","String","emits","setup","emit","t","parsePercentage","parseInt","handleClick","onFileClicked","target","focus","handleRemove","focusing","_hoisted_1","class","_hoisted_2","_hoisted_3","_hoisted_4","_hoisted_5","_hoisted_6","render","_ctx","_cache","$props","$setup","$data","$options","_component_el_progress","tag","uid","tabindex","onKeydown","$event","onFocus","onBlur","onClick","args","$slots","includes","src","alt","percentage","_","__file","script$1","uploader","dragover","onDrop","accept","value","dataTransfer","from","filter","extension","indexOf","split","pop","baseType","replace","map","type2","trim","some","acceptedType","startsWith","test","onDragover","render$1","onDragleave","script$2","UploadDragger","required","multiple","onStart","beforeUpload","drag","onPreview","onRemove","fileList","autoUpload","httpRequest","limit","Number","onExceed","reqs","mouseover","inputRef","uploadFiles","length","postFiles","slice","rawFile","post","before","Promise","then","processedFile","fileType","toString","File","p","catch","abort","_reqs","options","res","req","handleChange","click","handleKeydown","render$2","_component_upload_dragger","onFile","onChange","__defProp","defineProperty","__defProps","defineProperties","__getOwnPropDescs","getOwnPropertyDescriptors","__getOwnPropSymbols","getOwnPropertySymbols","__hasOwnProp","__propIsEnum","propertyIsEnumerable","__defNormalProp","obj","enumerable","configurable","writable","__spreadValues","a","b","prop","__spreadProps","getFile","find","genUid","seed","Date","now","useHandlers","uploadRef","tempIndex","clearFiles","handleError","splice","handleProgress","ev","handleSuccess","handleStart","size","raw","URL","createObjectURL","console","push","doRemove","beforeRemove","submit","cloneFile","immediate","deep","script$3","Upload","UploadList","showFileList","elForm","uploadDisabled","revokeObjectURL","dragOver","draging","_a","_b","uploadList","uploadData","trigger","uploadComponent","tip","install","app","component","_Upload"],"mappings":"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","sourcesContent":["import { defineComponent, ref, resolveComponent, openBlock, createBlock, TransitionGroup, withCtx, Fragment, renderList, withKeys, renderSlot, createCommentVNode, createVNode, createTextVNode, toDisplayString, inject, withModifiers, watch, computed, provide, getCurrentInstance, onBeforeUnmount, h } from 'vue';\nimport { elFormKey } from '../el-form';\nimport { useLocaleInject } from '../hooks';\nimport ElProgress from '../el-progress';\nimport cloneDeep from 'lodash/cloneDeep';\n\n/**\n * Make a map and return a function for checking if a key\n * is in that map.\n * IMPORTANT: all calls of this function must be prefixed with\n * \\/\\*#\\_\\_PURE\\_\\_\\*\\/\n * So that rollup can tree-shake them if necessary.\n */\nconst EMPTY_OBJ = (process.env.NODE_ENV !== 'production')\n    ? Object.freeze({})\n    : {};\nconst EMPTY_ARR = (process.env.NODE_ENV !== 'production') ? Object.freeze([]) : [];\nconst NOOP = () => { };\nconst hasOwnProperty = Object.prototype.hasOwnProperty;\nconst hasOwn = (val, key) => hasOwnProperty.call(val, key);\n\nfunction getError(action, option, xhr) {\n  let msg;\n  if (xhr.response) {\n    msg = `${xhr.response.error || xhr.response}`;\n  } else if (xhr.responseText) {\n    msg = `${xhr.responseText}`;\n  } else {\n    msg = `fail to post ${action} ${xhr.status}`;\n  }\n  const err = new Error(msg);\n  err.status = xhr.status;\n  err.method = \"post\";\n  err.url = action;\n  return err;\n}\nfunction getBody(xhr) {\n  const text = xhr.responseText || xhr.response;\n  if (!text) {\n    return text;\n  }\n  try {\n    return JSON.parse(text);\n  } catch (e) {\n    return text;\n  }\n}\nfunction upload(option) {\n  if (typeof XMLHttpRequest === \"undefined\") {\n    return;\n  }\n  const xhr = new XMLHttpRequest();\n  const action = option.action;\n  if (xhr.upload) {\n    xhr.upload.onprogress = function progress(e) {\n      if (e.total > 0) {\n        e.percent = e.loaded / e.total * 100;\n      }\n      option.onProgress(e);\n    };\n  }\n  const formData = new FormData();\n  if (option.data) {\n    Object.keys(option.data).forEach((key) => {\n      formData.append(key, option.data[key]);\n    });\n  }\n  formData.append(option.filename, option.file, option.file.name);\n  xhr.onerror = function error() {\n    option.onError(getError(action, option, xhr));\n  };\n  xhr.onload = function onload() {\n    if (xhr.status < 200 || xhr.status >= 300) {\n      return option.onError(getError(action, option, xhr));\n    }\n    option.onSuccess(getBody(xhr));\n  };\n  xhr.open(\"post\", action, true);\n  if (option.withCredentials && \"withCredentials\" in xhr) {\n    xhr.withCredentials = true;\n  }\n  const headers = option.headers || {};\n  for (const item in headers) {\n    if (hasOwn(headers, item) && headers[item] !== null) {\n      xhr.setRequestHeader(item, headers[item]);\n    }\n  }\n  xhr.send(formData);\n  return xhr;\n}\n\nvar script = defineComponent({\n  name: \"ElUploadList\",\n  components: { ElProgress },\n  props: {\n    files: {\n      type: Array,\n      default: () => []\n    },\n    disabled: {\n      type: Boolean,\n      default: false\n    },\n    handlePreview: {\n      type: Function,\n      default: () => NOOP\n    },\n    listType: {\n      type: String,\n      default: \"text\"\n    }\n  },\n  emits: [\"remove\"],\n  setup(props, { emit }) {\n    const { t } = useLocaleInject();\n    const parsePercentage = (val) => {\n      return parseInt(val, 10);\n    };\n    const handleClick = (file) => {\n      props.handlePreview(file);\n    };\n    const onFileClicked = (e) => {\n      e.target.focus();\n    };\n    const handleRemove = (e, file) => {\n      emit(\"remove\", file);\n    };\n    return {\n      focusing: ref(false),\n      parsePercentage,\n      handleClick,\n      handleRemove,\n      onFileClicked,\n      t\n    };\n  }\n});\n\nconst _hoisted_1 = /* @__PURE__ */ createVNode(\"i\", { class: \"el-icon-document\" }, null, -1);\nconst _hoisted_2 = { class: \"el-upload-list__item-status-label\" };\nconst _hoisted_3 = {\n  key: 2,\n  class: \"el-icon-close-tip\"\n};\nconst _hoisted_4 = {\n  key: 4,\n  class: \"el-upload-list__item-actions\"\n};\nconst _hoisted_5 = /* @__PURE__ */ createVNode(\"i\", { class: \"el-icon-zoom-in\" }, null, -1);\nconst _hoisted_6 = /* @__PURE__ */ createVNode(\"i\", { class: \"el-icon-delete\" }, null, -1);\nfunction render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_el_progress = resolveComponent(\"el-progress\");\n  return openBlock(), createBlock(TransitionGroup, {\n    tag: \"ul\",\n    class: [\n      \"el-upload-list\",\n      \"el-upload-list--\" + _ctx.listType,\n      { \"is-disabled\": _ctx.disabled }\n    ],\n    name: \"el-list\"\n  }, {\n    default: withCtx(() => [\n      (openBlock(true), createBlock(Fragment, null, renderList(_ctx.files, (file) => {\n        return openBlock(), createBlock(\"li\", {\n          key: file.uid || file,\n          class: [\"el-upload-list__item\", \"is-\" + file.status, _ctx.focusing ? \"focusing\" : \"\"],\n          tabindex: \"0\",\n          onKeydown: withKeys(($event) => !_ctx.disabled && _ctx.handleRemove($event, file), [\"delete\"]),\n          onFocus: _cache[1] || (_cache[1] = ($event) => _ctx.focusing = true),\n          onBlur: _cache[2] || (_cache[2] = ($event) => _ctx.focusing = false),\n          onClick: _cache[3] || (_cache[3] = (...args) => _ctx.onFileClicked && _ctx.onFileClicked(...args))\n        }, [\n          renderSlot(_ctx.$slots, \"default\", { file }, () => [\n            file.status !== \"uploading\" && [\"picture-card\", \"picture\"].includes(_ctx.listType) ? (openBlock(), createBlock(\"img\", {\n              key: 0,\n              class: \"el-upload-list__item-thumbnail\",\n              src: file.url,\n              alt: \"\"\n            }, null, 8, [\"src\"])) : createCommentVNode(\"v-if\", true),\n            createVNode(\"a\", {\n              class: \"el-upload-list__item-name\",\n              onClick: ($event) => _ctx.handleClick(file)\n            }, [\n              _hoisted_1,\n              createTextVNode(toDisplayString(file.name), 1)\n            ], 8, [\"onClick\"]),\n            createVNode(\"label\", _hoisted_2, [\n              createVNode(\"i\", {\n                class: {\n                  \"el-icon-upload-success\": true,\n                  \"el-icon-circle-check\": _ctx.listType === \"text\",\n                  \"el-icon-check\": [\"picture-card\", \"picture\"].includes(_ctx.listType)\n                }\n              }, null, 2)\n            ]),\n            !_ctx.disabled ? (openBlock(), createBlock(\"i\", {\n              key: 1,\n              class: \"el-icon-close\",\n              onClick: ($event) => _ctx.handleRemove($event, file)\n            }, null, 8, [\"onClick\"])) : createCommentVNode(\"v-if\", true),\n            createCommentVNode(\" Due to close btn only appears when li gets focused disappears after li gets blurred, thus keyboard navigation can never reach close btn\"),\n            createCommentVNode(\" This is a bug which needs to be fixed \"),\n            createCommentVNode(\" TODO: Fix the incorrect navigation interaction \"),\n            !_ctx.disabled ? (openBlock(), createBlock(\"i\", _hoisted_3, toDisplayString(_ctx.t(\"el.upload.deleteTip\")), 1)) : createCommentVNode(\"v-if\", true),\n            file.status === \"uploading\" ? (openBlock(), createBlock(_component_el_progress, {\n              key: 3,\n              type: _ctx.listType === \"picture-card\" ? \"circle\" : \"line\",\n              \"stroke-width\": _ctx.listType === \"picture-card\" ? 6 : 2,\n              percentage: _ctx.parsePercentage(file.percentage)\n            }, null, 8, [\"type\", \"stroke-width\", \"percentage\"])) : createCommentVNode(\"v-if\", true),\n            _ctx.listType === \"picture-card\" ? (openBlock(), createBlock(\"span\", _hoisted_4, [\n              createVNode(\"span\", {\n                class: \"el-upload-list__item-preview\",\n                onClick: ($event) => _ctx.handlePreview(file)\n              }, [\n                _hoisted_5\n              ], 8, [\"onClick\"]),\n              !_ctx.disabled ? (openBlock(), createBlock(\"span\", {\n                key: 0,\n                class: \"el-upload-list__item-delete\",\n                onClick: ($event) => _ctx.handleRemove($event, file)\n              }, [\n                _hoisted_6\n              ], 8, [\"onClick\"])) : createCommentVNode(\"v-if\", true)\n            ])) : createCommentVNode(\"v-if\", true)\n          ])\n        ], 42, [\"onKeydown\"]);\n      }), 128))\n    ]),\n    _: 3\n  }, 8, [\"class\"]);\n}\n\nscript.render = render;\nscript.__file = \"packages/upload/src/upload-list.vue\";\n\nvar script$1 = defineComponent({\n  name: \"ElUploadDrag\",\n  props: {\n    disabled: {\n      type: Boolean,\n      default: false\n    }\n  },\n  emits: [\"file\"],\n  setup(props, { emit }) {\n    const uploader = inject(\"uploader\", {});\n    const dragover = ref(false);\n    function onDrop(e) {\n      if (props.disabled || !uploader)\n        return;\n      const accept = uploader.accept;\n      dragover.value = false;\n      if (!accept) {\n        emit(\"file\", e.dataTransfer.files);\n        return;\n      }\n      emit(\"file\", Array.from(e.dataTransfer.files).filter((file) => {\n        const { type, name } = file;\n        const extension = name.indexOf(\".\") > -1 ? `.${name.split(\".\").pop()}` : \"\";\n        const baseType = type.replace(/\\/.*$/, \"\");\n        return accept.split(\",\").map((type2) => type2.trim()).filter((type2) => type2).some((acceptedType) => {\n          if (acceptedType.startsWith(\".\")) {\n            return extension === acceptedType;\n          }\n          if (/\\/\\*$/.test(acceptedType)) {\n            return baseType === acceptedType.replace(/\\/\\*$/, \"\");\n          }\n          if (/^[^\\/]+\\/[^\\/]+$/.test(acceptedType)) {\n            return type === acceptedType;\n          }\n          return false;\n        });\n      }));\n    }\n    function onDragover() {\n      if (!props.disabled)\n        dragover.value = true;\n    }\n    return {\n      dragover,\n      onDrop,\n      onDragover\n    };\n  }\n});\n\nfunction render$1(_ctx, _cache, $props, $setup, $data, $options) {\n  return openBlock(), createBlock(\"div\", {\n    class: {\n      \"el-upload-dragger\": true,\n      \"is-dragover\": _ctx.dragover\n    },\n    onDrop: _cache[1] || (_cache[1] = withModifiers((...args) => _ctx.onDrop && _ctx.onDrop(...args), [\"prevent\"])),\n    onDragover: _cache[2] || (_cache[2] = withModifiers((...args) => _ctx.onDragover && _ctx.onDragover(...args), [\"prevent\"])),\n    onDragleave: _cache[3] || (_cache[3] = withModifiers(($event) => _ctx.dragover = false, [\"prevent\"]))\n  }, [\n    renderSlot(_ctx.$slots, \"default\")\n  ], 34);\n}\n\nscript$1.render = render$1;\nscript$1.__file = \"packages/upload/src/upload-dragger.vue\";\n\nvar script$2 = defineComponent({\n  components: {\n    UploadDragger: script$1\n  },\n  props: {\n    type: {\n      type: String,\n      default: \"\"\n    },\n    action: {\n      type: String,\n      required: true\n    },\n    name: {\n      type: String,\n      default: \"file\"\n    },\n    data: {\n      type: Object,\n      default: () => null\n    },\n    headers: {\n      type: Object,\n      default: () => null\n    },\n    withCredentials: {\n      type: Boolean,\n      default: false\n    },\n    multiple: {\n      type: Boolean,\n      default: null\n    },\n    accept: {\n      type: String,\n      default: \"\"\n    },\n    onStart: {\n      type: Function,\n      default: NOOP\n    },\n    onProgress: {\n      type: Function,\n      default: NOOP\n    },\n    onSuccess: {\n      type: Function,\n      default: NOOP\n    },\n    onError: {\n      type: Function,\n      default: NOOP\n    },\n    beforeUpload: {\n      type: Function,\n      default: NOOP\n    },\n    drag: {\n      type: Boolean,\n      default: false\n    },\n    onPreview: {\n      type: Function,\n      default: NOOP\n    },\n    onRemove: {\n      type: Function,\n      default: NOOP\n    },\n    fileList: {\n      type: Array,\n      default: () => []\n    },\n    autoUpload: {\n      type: Boolean,\n      default: true\n    },\n    listType: {\n      type: String,\n      default: \"text\"\n    },\n    httpRequest: {\n      type: Function,\n      default: () => upload\n    },\n    disabled: Boolean,\n    limit: {\n      type: Number,\n      default: null\n    },\n    onExceed: {\n      type: Function,\n      default: NOOP\n    }\n  },\n  setup(props) {\n    const reqs = ref({});\n    const mouseover = ref(false);\n    const inputRef = ref(null);\n    function uploadFiles(files) {\n      if (props.limit && props.fileList.length + files.length > props.limit) {\n        props.onExceed(files, props.fileList);\n        return;\n      }\n      let postFiles = Array.from(files);\n      if (!props.multiple) {\n        postFiles = postFiles.slice(0, 1);\n      }\n      if (postFiles.length === 0) {\n        return;\n      }\n      postFiles.forEach((rawFile) => {\n        props.onStart(rawFile);\n        if (props.autoUpload)\n          upload(rawFile);\n      });\n    }\n    function upload(rawFile) {\n      inputRef.value.value = null;\n      if (!props.beforeUpload) {\n        return post(rawFile);\n      }\n      const before = props.beforeUpload(rawFile);\n      if (before instanceof Promise) {\n        before.then((processedFile) => {\n          const fileType = Object.prototype.toString.call(processedFile);\n          if (fileType === \"[object File]\" || fileType === \"[object Blob]\") {\n            if (fileType === \"[object Blob]\") {\n              processedFile = new File([processedFile], rawFile.name, {\n                type: rawFile.type\n              });\n            }\n            for (const p in rawFile) {\n              if (hasOwn(rawFile, p)) {\n                processedFile[p] = rawFile[p];\n              }\n            }\n            post(processedFile);\n          } else {\n            post(rawFile);\n          }\n        }).catch(() => {\n          props.onRemove(null, rawFile);\n        });\n      } else if (before !== false) {\n        post(rawFile);\n      } else {\n        props.onRemove(null, rawFile);\n      }\n    }\n    function abort(file) {\n      const _reqs = reqs.value;\n      if (file) {\n        let uid = file;\n        if (file.uid)\n          uid = file.uid;\n        if (_reqs[uid]) {\n          _reqs[uid].abort();\n        }\n      } else {\n        Object.keys(_reqs).forEach((uid) => {\n          if (_reqs[uid])\n            _reqs[uid].abort();\n          delete _reqs[uid];\n        });\n      }\n    }\n    function post(rawFile) {\n      const { uid } = rawFile;\n      const options = {\n        headers: props.headers,\n        withCredentials: props.withCredentials,\n        file: rawFile,\n        data: props.data,\n        filename: props.name,\n        action: props.action,\n        onProgress: (e) => {\n          props.onProgress(e, rawFile);\n        },\n        onSuccess: (res) => {\n          props.onSuccess(res, rawFile);\n          delete reqs.value[uid];\n        },\n        onError: (err) => {\n          props.onError(err, rawFile);\n          delete reqs.value[uid];\n        }\n      };\n      const req = props.httpRequest(options);\n      reqs.value[uid] = req;\n      if (req instanceof Promise) {\n        req.then(options.onSuccess, options.onError);\n      }\n    }\n    function handleChange(e) {\n      const files = e.target.files;\n      if (!files)\n        return;\n      uploadFiles(files);\n    }\n    function handleClick() {\n      if (!props.disabled) {\n        inputRef.value.value = null;\n        inputRef.value.click();\n      }\n    }\n    function handleKeydown() {\n      handleClick();\n    }\n    return {\n      reqs,\n      mouseover,\n      inputRef,\n      abort,\n      post,\n      handleChange,\n      handleClick,\n      handleKeydown,\n      upload,\n      uploadFiles\n    };\n  }\n});\n\nfunction render$2(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_upload_dragger = resolveComponent(\"upload-dragger\");\n  return openBlock(), createBlock(\"div\", {\n    class: [\"el-upload\", `el-upload--${_ctx.listType}`],\n    tabindex: \"0\",\n    onClick: _cache[2] || (_cache[2] = (...args) => _ctx.handleClick && _ctx.handleClick(...args)),\n    onKeydown: _cache[3] || (_cache[3] = withKeys(withModifiers((...args) => _ctx.handleKeydown && _ctx.handleKeydown(...args), [\"self\"]), [\"enter\", \"space\"]))\n  }, [\n    _ctx.drag ? (openBlock(), createBlock(_component_upload_dragger, {\n      key: 0,\n      disabled: _ctx.disabled,\n      onFile: _ctx.uploadFiles\n    }, {\n      default: withCtx(() => [\n        renderSlot(_ctx.$slots, \"default\")\n      ]),\n      _: 3\n    }, 8, [\"disabled\", \"onFile\"])) : renderSlot(_ctx.$slots, \"default\", { key: 1 }),\n    createVNode(\"input\", {\n      ref: \"inputRef\",\n      class: \"el-upload__input\",\n      type: \"file\",\n      name: _ctx.name,\n      multiple: _ctx.multiple,\n      accept: _ctx.accept,\n      onChange: _cache[1] || (_cache[1] = (...args) => _ctx.handleChange && _ctx.handleChange(...args))\n    }, null, 40, [\"name\", \"multiple\", \"accept\"])\n  ], 34);\n}\n\nscript$2.render = render$2;\nscript$2.__file = \"packages/upload/src/upload.vue\";\n\nvar __defProp = Object.defineProperty;\nvar __defProps = Object.defineProperties;\nvar __getOwnPropDescs = Object.getOwnPropertyDescriptors;\nvar __getOwnPropSymbols = Object.getOwnPropertySymbols;\nvar __hasOwnProp = Object.prototype.hasOwnProperty;\nvar __propIsEnum = Object.prototype.propertyIsEnumerable;\nvar __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __spreadValues = (a, b) => {\n  for (var prop in b || (b = {}))\n    if (__hasOwnProp.call(b, prop))\n      __defNormalProp(a, prop, b[prop]);\n  if (__getOwnPropSymbols)\n    for (var prop of __getOwnPropSymbols(b)) {\n      if (__propIsEnum.call(b, prop))\n        __defNormalProp(a, prop, b[prop]);\n    }\n  return a;\n};\nvar __spreadProps = (a, b) => __defProps(a, __getOwnPropDescs(b));\nfunction getFile(rawFile, uploadFiles) {\n  return uploadFiles.find((file) => file.uid === rawFile.uid);\n}\nfunction genUid(seed) {\n  return Date.now() + seed;\n}\nvar useHandlers = (props) => {\n  const uploadFiles = ref([]);\n  const uploadRef = ref(null);\n  let tempIndex = 1;\n  function abort(file) {\n    uploadRef.value.abort(file);\n  }\n  function clearFiles() {\n    uploadFiles.value = [];\n  }\n  function handleError(err, rawFile) {\n    const file = getFile(rawFile, uploadFiles.value);\n    file.status = \"fail\";\n    uploadFiles.value.splice(uploadFiles.value.indexOf(file), 1);\n    props.onError(err, file, uploadFiles.value);\n    props.onChange(file, uploadFiles.value);\n  }\n  function handleProgress(ev, rawFile) {\n    const file = getFile(rawFile, uploadFiles.value);\n    props.onProgress(ev, file, uploadFiles.value);\n    file.status = \"uploading\";\n    file.percentage = ev.percent || 0;\n  }\n  function handleSuccess(res, rawFile) {\n    const file = getFile(rawFile, uploadFiles.value);\n    if (file) {\n      file.status = \"success\";\n      file.response = res;\n      props.onSuccess(res, file, uploadFiles.value);\n      props.onChange(file, uploadFiles.value);\n    }\n  }\n  function handleStart(rawFile) {\n    const uid = genUid(tempIndex++);\n    rawFile.uid = uid;\n    const file = {\n      name: rawFile.name,\n      percentage: 0,\n      status: \"ready\",\n      size: rawFile.size,\n      raw: rawFile,\n      uid\n    };\n    if (props.listType === \"picture-card\" || props.listType === \"picture\") {\n      try {\n        file.url = URL.createObjectURL(rawFile);\n      } catch (err) {\n        console.error(\"[Element Error][Upload]\", err);\n        props.onError(err, file, uploadFiles.value);\n      }\n    }\n    uploadFiles.value.push(file);\n    props.onChange(file, uploadFiles.value);\n  }\n  function handleRemove(file, raw) {\n    if (raw) {\n      file = getFile(raw, uploadFiles.value);\n    }\n    const doRemove = () => {\n      abort(file);\n      const fileList = uploadFiles.value;\n      fileList.splice(fileList.indexOf(file), 1);\n      props.onRemove(file, fileList);\n    };\n    if (!props.beforeRemove) {\n      doRemove();\n    } else if (typeof props.beforeRemove === \"function\") {\n      const before = props.beforeRemove(file, uploadFiles.value);\n      if (before instanceof Promise) {\n        before.then(() => {\n          doRemove();\n        }).catch(NOOP);\n      } else if (before !== false) {\n        doRemove();\n      }\n    }\n  }\n  function submit() {\n    uploadFiles.value.filter((file) => file.status === \"ready\").forEach((file) => {\n      uploadRef.value.upload(file.raw);\n    });\n  }\n  watch(() => props.listType, (val) => {\n    if (val === \"picture-card\" || val === \"picture\") {\n      uploadFiles.value = uploadFiles.value.map((file) => {\n        if (!file.url && file.raw) {\n          try {\n            file.url = URL.createObjectURL(file.raw);\n          } catch (err) {\n            props.onError(err, file, uploadFiles.value);\n          }\n        }\n        return file;\n      });\n    }\n  });\n  watch(() => props.fileList, (fileList) => {\n    uploadFiles.value = fileList.map((file) => {\n      const cloneFile = cloneDeep(file);\n      return __spreadProps(__spreadValues({}, cloneFile), {\n        uid: file.uid || genUid(tempIndex++),\n        status: file.status || \"success\"\n      });\n    });\n  }, {\n    immediate: true,\n    deep: true\n  });\n  return {\n    abort,\n    clearFiles,\n    handleError,\n    handleProgress,\n    handleStart,\n    handleSuccess,\n    handleRemove,\n    submit,\n    uploadFiles,\n    uploadRef\n  };\n};\n\nvar script$3 = defineComponent({\n  name: \"ElUpload\",\n  components: {\n    Upload: script$2,\n    UploadList: script\n  },\n  props: {\n    action: {\n      type: String,\n      required: true\n    },\n    headers: {\n      type: Object,\n      default: () => ({})\n    },\n    data: {\n      type: Object,\n      default: () => ({})\n    },\n    multiple: {\n      type: Boolean,\n      default: false\n    },\n    name: {\n      type: String,\n      default: \"file\"\n    },\n    drag: {\n      type: Boolean,\n      default: false\n    },\n    withCredentials: Boolean,\n    showFileList: {\n      type: Boolean,\n      default: true\n    },\n    accept: {\n      type: String,\n      default: \"\"\n    },\n    type: {\n      type: String,\n      default: \"select\"\n    },\n    beforeUpload: {\n      type: Function,\n      default: NOOP\n    },\n    beforeRemove: {\n      type: Function,\n      default: NOOP\n    },\n    onRemove: {\n      type: Function,\n      default: NOOP\n    },\n    onChange: {\n      type: Function,\n      default: NOOP\n    },\n    onPreview: {\n      type: Function,\n      default: NOOP\n    },\n    onSuccess: {\n      type: Function,\n      default: NOOP\n    },\n    onProgress: {\n      type: Function,\n      default: NOOP\n    },\n    onError: {\n      type: Function,\n      default: NOOP\n    },\n    fileList: {\n      type: Array,\n      default: () => {\n        return [];\n      }\n    },\n    autoUpload: {\n      type: Boolean,\n      default: true\n    },\n    listType: {\n      type: String,\n      default: \"text\"\n    },\n    httpRequest: {\n      type: Function,\n      default: upload\n    },\n    disabled: Boolean,\n    limit: {\n      type: Number,\n      default: null\n    },\n    onExceed: {\n      type: Function,\n      default: () => NOOP\n    }\n  },\n  setup(props) {\n    const elForm = inject(elFormKey, {});\n    const uploadDisabled = computed(() => {\n      return props.disabled || elForm.disabled;\n    });\n    const {\n      abort,\n      clearFiles,\n      handleError,\n      handleProgress,\n      handleStart,\n      handleSuccess,\n      handleRemove,\n      submit,\n      uploadRef,\n      uploadFiles\n    } = useHandlers(props);\n    provide(\"uploader\", getCurrentInstance());\n    onBeforeUnmount(() => {\n      uploadFiles.value.forEach((file) => {\n        if (file.url && file.url.indexOf(\"blob:\") === 0) {\n          URL.revokeObjectURL(file.url);\n        }\n      });\n    });\n    return {\n      abort,\n      dragOver: ref(false),\n      draging: ref(false),\n      handleError,\n      handleProgress,\n      handleRemove,\n      handleStart,\n      handleSuccess,\n      uploadDisabled,\n      uploadFiles,\n      uploadRef,\n      submit,\n      clearFiles\n    };\n  },\n  render() {\n    var _a, _b;\n    let uploadList;\n    if (this.showFileList) {\n      uploadList = h(script, {\n        disabled: this.uploadDisabled,\n        listType: this.listType,\n        files: this.uploadFiles,\n        onRemove: this.handleRemove,\n        handlePreview: this.onPreview\n      }, this.$slots.file ? {\n        default: (props) => {\n          return this.$slots.file({\n            file: props.file\n          });\n        }\n      } : null);\n    } else {\n      uploadList = null;\n    }\n    const uploadData = {\n      type: this.type,\n      drag: this.drag,\n      action: this.action,\n      multiple: this.multiple,\n      \"before-upload\": this.beforeUpload,\n      \"with-credentials\": this.withCredentials,\n      headers: this.headers,\n      name: this.name,\n      data: this.data,\n      accept: this.accept,\n      fileList: this.uploadFiles,\n      autoUpload: this.autoUpload,\n      listType: this.listType,\n      disabled: this.uploadDisabled,\n      limit: this.limit,\n      \"on-exceed\": this.onExceed,\n      \"on-start\": this.handleStart,\n      \"on-progress\": this.handleProgress,\n      \"on-success\": this.handleSuccess,\n      \"on-error\": this.handleError,\n      \"on-preview\": this.onPreview,\n      \"on-remove\": this.handleRemove,\n      \"http-request\": this.httpRequest,\n      ref: \"uploadRef\"\n    };\n    const trigger = this.$slots.trigger || this.$slots.default;\n    const uploadComponent = h(script$2, uploadData, {\n      default: () => trigger == null ? void 0 : trigger()\n    });\n    return h(\"div\", [\n      this.listType === \"picture-card\" ? uploadList : null,\n      this.$slots.trigger ? [uploadComponent, this.$slots.default()] : uploadComponent,\n      (_b = (_a = this.$slots).tip) == null ? void 0 : _b.call(_a),\n      this.listType !== \"picture-card\" ? uploadList : null\n    ]);\n  }\n});\n\nscript$3.__file = \"packages/upload/src/index.vue\";\n\nscript$3.install = (app) => {\n  app.component(script$3.name, script$3);\n};\nconst _Upload = script$3;\n\nexport default _Upload;\n"]},"metadata":{},"sourceType":"module"}