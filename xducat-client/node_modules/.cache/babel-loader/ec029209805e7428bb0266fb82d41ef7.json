{"ast":null,"code":"import { EVENT_CODE, triggerEvent } from '../aria';\nimport SubMenu from './submenu';\n\nclass MenuItem {\n  constructor(domNode) {\n    this.domNode = domNode;\n    this.submenu = null;\n    this.submenu = null;\n    this.init();\n  }\n\n  init() {\n    this.domNode.setAttribute('tabindex', '0');\n    const menuChild = this.domNode.querySelector('.el-menu');\n\n    if (menuChild) {\n      this.submenu = new SubMenu(this, menuChild);\n    }\n\n    this.addListeners();\n  }\n\n  addListeners() {\n    this.domNode.addEventListener('keydown', event => {\n      let prevDef = false;\n\n      switch (event.code) {\n        case EVENT_CODE.down:\n          {\n            triggerEvent(event.currentTarget, 'mouseenter');\n            this.submenu && this.submenu.gotoSubIndex(0);\n            prevDef = true;\n            break;\n          }\n\n        case EVENT_CODE.up:\n          {\n            triggerEvent(event.currentTarget, 'mouseenter');\n            this.submenu && this.submenu.gotoSubIndex(this.submenu.subMenuItems.length - 1);\n            prevDef = true;\n            break;\n          }\n\n        case EVENT_CODE.tab:\n          {\n            triggerEvent(event.currentTarget, 'mouseleave');\n            break;\n          }\n\n        case EVENT_CODE.enter:\n        case EVENT_CODE.space:\n          {\n            prevDef = true;\n            event.currentTarget.click();\n            break;\n          }\n      }\n\n      if (prevDef) {\n        event.preventDefault();\n      }\n    });\n  }\n\n}\n\nexport default MenuItem;","map":{"version":3,"sources":["F:/XDUcat/XDUcat-client/node_modules/element-plus/es/utils/menu/menu-item.js"],"names":["EVENT_CODE","triggerEvent","SubMenu","MenuItem","constructor","domNode","submenu","init","setAttribute","menuChild","querySelector","addListeners","addEventListener","event","prevDef","code","down","currentTarget","gotoSubIndex","up","subMenuItems","length","tab","enter","space","click","preventDefault"],"mappings":"AAAA,SAASA,UAAT,EAAqBC,YAArB,QAAyC,SAAzC;AACA,OAAOC,OAAP,MAAoB,WAApB;;AAEA,MAAMC,QAAN,CAAe;AACXC,EAAAA,WAAW,CAACC,OAAD,EAAU;AACjB,SAAKA,OAAL,GAAeA,OAAf;AACA,SAAKC,OAAL,GAAe,IAAf;AACA,SAAKA,OAAL,GAAe,IAAf;AACA,SAAKC,IAAL;AACH;;AACDA,EAAAA,IAAI,GAAG;AACH,SAAKF,OAAL,CAAaG,YAAb,CAA0B,UAA1B,EAAsC,GAAtC;AACA,UAAMC,SAAS,GAAG,KAAKJ,OAAL,CAAaK,aAAb,CAA2B,UAA3B,CAAlB;;AACA,QAAID,SAAJ,EAAe;AACX,WAAKH,OAAL,GAAe,IAAIJ,OAAJ,CAAY,IAAZ,EAAkBO,SAAlB,CAAf;AACH;;AACD,SAAKE,YAAL;AACH;;AACDA,EAAAA,YAAY,GAAG;AACX,SAAKN,OAAL,CAAaO,gBAAb,CAA8B,SAA9B,EAA0CC,KAAD,IAAW;AAChD,UAAIC,OAAO,GAAG,KAAd;;AACA,cAAQD,KAAK,CAACE,IAAd;AACI,aAAKf,UAAU,CAACgB,IAAhB;AAAsB;AAClBf,YAAAA,YAAY,CAACY,KAAK,CAACI,aAAP,EAAsB,YAAtB,CAAZ;AACA,iBAAKX,OAAL,IAAgB,KAAKA,OAAL,CAAaY,YAAb,CAA0B,CAA1B,CAAhB;AACAJ,YAAAA,OAAO,GAAG,IAAV;AACA;AACH;;AACD,aAAKd,UAAU,CAACmB,EAAhB;AAAoB;AAChBlB,YAAAA,YAAY,CAACY,KAAK,CAACI,aAAP,EAAsB,YAAtB,CAAZ;AACA,iBAAKX,OAAL,IAAgB,KAAKA,OAAL,CAAaY,YAAb,CAA0B,KAAKZ,OAAL,CAAac,YAAb,CAA0BC,MAA1B,GAAmC,CAA7D,CAAhB;AACAP,YAAAA,OAAO,GAAG,IAAV;AACA;AACH;;AACD,aAAKd,UAAU,CAACsB,GAAhB;AAAqB;AACjBrB,YAAAA,YAAY,CAACY,KAAK,CAACI,aAAP,EAAsB,YAAtB,CAAZ;AACA;AACH;;AACD,aAAKjB,UAAU,CAACuB,KAAhB;AACA,aAAKvB,UAAU,CAACwB,KAAhB;AAAuB;AACnBV,YAAAA,OAAO,GAAG,IAAV;AACAD,YAAAA,KAAK,CAACI,aAAN,CAAoBQ,KAApB;AACA;AACH;AAtBL;;AAwBA,UAAIX,OAAJ,EAAa;AACTD,QAAAA,KAAK,CAACa,cAAN;AACH;AACJ,KA7BD;AA8BH;;AA9CU;;AAiDf,eAAevB,QAAf","sourcesContent":["import { EVENT_CODE, triggerEvent } from '../aria';\nimport SubMenu from './submenu';\n\nclass MenuItem {\r\n    constructor(domNode) {\r\n        this.domNode = domNode;\r\n        this.submenu = null;\r\n        this.submenu = null;\r\n        this.init();\r\n    }\r\n    init() {\r\n        this.domNode.setAttribute('tabindex', '0');\r\n        const menuChild = this.domNode.querySelector('.el-menu');\r\n        if (menuChild) {\r\n            this.submenu = new SubMenu(this, menuChild);\r\n        }\r\n        this.addListeners();\r\n    }\r\n    addListeners() {\r\n        this.domNode.addEventListener('keydown', (event) => {\r\n            let prevDef = false;\r\n            switch (event.code) {\r\n                case EVENT_CODE.down: {\r\n                    triggerEvent(event.currentTarget, 'mouseenter');\r\n                    this.submenu && this.submenu.gotoSubIndex(0);\r\n                    prevDef = true;\r\n                    break;\r\n                }\r\n                case EVENT_CODE.up: {\r\n                    triggerEvent(event.currentTarget, 'mouseenter');\r\n                    this.submenu && this.submenu.gotoSubIndex(this.submenu.subMenuItems.length - 1);\r\n                    prevDef = true;\r\n                    break;\r\n                }\r\n                case EVENT_CODE.tab: {\r\n                    triggerEvent(event.currentTarget, 'mouseleave');\r\n                    break;\r\n                }\r\n                case EVENT_CODE.enter:\r\n                case EVENT_CODE.space: {\r\n                    prevDef = true;\r\n                    event.currentTarget.click();\r\n                    break;\r\n                }\r\n            }\r\n            if (prevDef) {\r\n                event.preventDefault();\r\n            }\r\n        });\r\n    }\r\n}\n\nexport default MenuItem;\n"]},"metadata":{},"sourceType":"module"}