{"ast":null,"code":"import { on, once, off } from '../utils/dom';\nimport isServer from '../utils/isServer';\nimport { nextTick } from 'vue';\nimport { obtainAllFocusableElements, EVENT_CODE } from '../utils/aria';\nimport normalizeWheel from 'normalize-wheel';\nimport { addResizeListener, removeResizeListener } from '../utils/resize-event';\nconst nodeList = new Map();\nlet startClick;\n\nif (!isServer) {\n  on(document, \"mousedown\", e => startClick = e);\n  on(document, \"mouseup\", e => {\n    for (const handlers of nodeList.values()) {\n      for (const {\n        documentHandler\n      } of handlers) {\n        documentHandler(e, startClick);\n      }\n    }\n  });\n}\n\nfunction createDocumentHandler(el, binding) {\n  let excludes = [];\n\n  if (Array.isArray(binding.arg)) {\n    excludes = binding.arg;\n  } else if (binding.arg instanceof HTMLElement) {\n    excludes.push(binding.arg);\n  }\n\n  return function (mouseup, mousedown) {\n    const popperRef = binding.instance.popperRef;\n    const mouseUpTarget = mouseup.target;\n    const mouseDownTarget = mousedown == null ? void 0 : mousedown.target;\n    const isBound = !binding || !binding.instance;\n    const isTargetExists = !mouseUpTarget || !mouseDownTarget;\n    const isContainedByEl = el.contains(mouseUpTarget) || el.contains(mouseDownTarget);\n    const isSelf = el === mouseUpTarget;\n    const isTargetExcluded = excludes.length && excludes.some(item => item == null ? void 0 : item.contains(mouseUpTarget)) || excludes.length && excludes.includes(mouseDownTarget);\n    const isContainedByPopper = popperRef && (popperRef.contains(mouseUpTarget) || popperRef.contains(mouseDownTarget));\n\n    if (isBound || isTargetExists || isContainedByEl || isSelf || isTargetExcluded || isContainedByPopper) {\n      return;\n    }\n\n    binding.value(mouseup, mousedown);\n  };\n}\n\nconst ClickOutside = {\n  beforeMount(el, binding) {\n    if (!nodeList.has(el)) {\n      nodeList.set(el, []);\n    }\n\n    nodeList.get(el).push({\n      documentHandler: createDocumentHandler(el, binding),\n      bindingFn: binding.value\n    });\n  },\n\n  updated(el, binding) {\n    if (!nodeList.has(el)) {\n      nodeList.set(el, []);\n    }\n\n    const handlers = nodeList.get(el);\n    const oldHandlerIndex = handlers.findIndex(item => item.bindingFn === binding.oldValue);\n    const newHandler = {\n      documentHandler: createDocumentHandler(el, binding),\n      bindingFn: binding.value\n    };\n\n    if (oldHandlerIndex >= 0) {\n      handlers.splice(oldHandlerIndex, 1, newHandler);\n    } else {\n      handlers.push(newHandler);\n    }\n  },\n\n  unmounted(el) {\n    nodeList.delete(el);\n  }\n\n};\nvar index = {\n  beforeMount(el, binding) {\n    let interval = null;\n    let startTime;\n\n    const handler = () => binding.value && binding.value();\n\n    const clear = () => {\n      if (Date.now() - startTime < 100) {\n        handler();\n      }\n\n      clearInterval(interval);\n      interval = null;\n    };\n\n    on(el, \"mousedown\", e => {\n      if (e.button !== 0) return;\n      startTime = Date.now();\n      once(document, \"mouseup\", clear);\n      clearInterval(interval);\n      interval = setInterval(handler, 100);\n    });\n  }\n\n};\nconst FOCUSABLE_CHILDREN = \"_trap-focus-children\";\nconst FOCUS_STACK = [];\n\nconst FOCUS_HANDLER = e => {\n  var _a;\n\n  if (FOCUS_STACK.length === 0) return;\n  const focusableElement = FOCUS_STACK[FOCUS_STACK.length - 1][FOCUSABLE_CHILDREN];\n\n  if (focusableElement.length > 0 && e.code === EVENT_CODE.tab) {\n    if (focusableElement.length === 1) {\n      e.preventDefault();\n\n      if (document.activeElement !== focusableElement[0]) {\n        focusableElement[0].focus();\n      }\n\n      return;\n    }\n\n    const goingBackward = e.shiftKey;\n    const isFirst = e.target === focusableElement[0];\n    const isLast = e.target === focusableElement[focusableElement.length - 1];\n\n    if (isFirst && goingBackward) {\n      e.preventDefault();\n      focusableElement[focusableElement.length - 1].focus();\n    }\n\n    if (isLast && !goingBackward) {\n      e.preventDefault();\n      focusableElement[0].focus();\n    }\n\n    if (process.env.NODE_ENV === \"test\") {\n      const index = focusableElement.findIndex(element => element === e.target);\n\n      if (index !== -1) {\n        (_a = focusableElement[goingBackward ? index - 1 : index + 1]) == null ? void 0 : _a.focus();\n      }\n    }\n  }\n};\n\nconst TrapFocus = {\n  beforeMount(el) {\n    el[FOCUSABLE_CHILDREN] = obtainAllFocusableElements(el);\n    FOCUS_STACK.push(el);\n\n    if (FOCUS_STACK.length <= 1) {\n      on(document, \"keydown\", FOCUS_HANDLER);\n    }\n  },\n\n  updated(el) {\n    nextTick(() => {\n      el[FOCUSABLE_CHILDREN] = obtainAllFocusableElements(el);\n    });\n  },\n\n  unmounted() {\n    FOCUS_STACK.shift();\n\n    if (FOCUS_STACK.length === 0) {\n      off(document, \"keydown\", FOCUS_HANDLER);\n    }\n  }\n\n};\nconst isFirefox = typeof navigator !== \"undefined\" && navigator.userAgent.toLowerCase().indexOf(\"firefox\") > -1;\n\nconst mousewheel = function (element, callback) {\n  if (element && element.addEventListener) {\n    const fn = function (event) {\n      const normalized = normalizeWheel(event);\n      callback && callback.apply(this, [event, normalized]);\n    };\n\n    if (isFirefox) {\n      element.addEventListener(\"DOMMouseScroll\", fn);\n    } else {\n      element.onmousewheel = fn;\n    }\n  }\n};\n\nconst Mousewheel = {\n  beforeMount(el, binding) {\n    mousewheel(el, binding.value);\n  }\n\n};\nconst Resize = {\n  beforeMount(el, binding) {\n    el._handleResize = () => {\n      var _a;\n\n      el && ((_a = binding.value) == null ? void 0 : _a.call(binding));\n    };\n\n    addResizeListener(el, el._handleResize);\n  },\n\n  beforeUnmount(el) {\n    removeResizeListener(el, el._handleResize);\n  }\n\n};\nexport { ClickOutside, Mousewheel, index as RepeatClick, Resize, TrapFocus };","map":{"version":3,"sources":["D:/A-大三下/web开发/xducat/xducat-client/node_modules/element-plus/es/directives/index.js"],"names":["on","once","off","isServer","nextTick","obtainAllFocusableElements","EVENT_CODE","normalizeWheel","addResizeListener","removeResizeListener","nodeList","Map","startClick","document","e","handlers","values","documentHandler","createDocumentHandler","el","binding","excludes","Array","isArray","arg","HTMLElement","push","mouseup","mousedown","popperRef","instance","mouseUpTarget","target","mouseDownTarget","isBound","isTargetExists","isContainedByEl","contains","isSelf","isTargetExcluded","length","some","item","includes","isContainedByPopper","value","ClickOutside","beforeMount","has","set","get","bindingFn","updated","oldHandlerIndex","findIndex","oldValue","newHandler","splice","unmounted","delete","index","interval","startTime","handler","clear","Date","now","clearInterval","button","setInterval","FOCUSABLE_CHILDREN","FOCUS_STACK","FOCUS_HANDLER","_a","focusableElement","code","tab","preventDefault","activeElement","focus","goingBackward","shiftKey","isFirst","isLast","process","env","NODE_ENV","element","TrapFocus","shift","isFirefox","navigator","userAgent","toLowerCase","indexOf","mousewheel","callback","addEventListener","fn","event","normalized","apply","onmousewheel","Mousewheel","Resize","_handleResize","call","beforeUnmount","RepeatClick"],"mappings":"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","sourcesContent":["import { on, once, off } from '../utils/dom';\nimport isServer from '../utils/isServer';\nimport { nextTick } from 'vue';\nimport { obtainAllFocusableElements, EVENT_CODE } from '../utils/aria';\nimport normalizeWheel from 'normalize-wheel';\nimport { addResizeListener, removeResizeListener } from '../utils/resize-event';\n\nconst nodeList = new Map();\nlet startClick;\nif (!isServer) {\n  on(document, \"mousedown\", (e) => startClick = e);\n  on(document, \"mouseup\", (e) => {\n    for (const handlers of nodeList.values()) {\n      for (const { documentHandler } of handlers) {\n        documentHandler(e, startClick);\n      }\n    }\n  });\n}\nfunction createDocumentHandler(el, binding) {\n  let excludes = [];\n  if (Array.isArray(binding.arg)) {\n    excludes = binding.arg;\n  } else if (binding.arg instanceof HTMLElement) {\n    excludes.push(binding.arg);\n  }\n  return function(mouseup, mousedown) {\n    const popperRef = binding.instance.popperRef;\n    const mouseUpTarget = mouseup.target;\n    const mouseDownTarget = mousedown == null ? void 0 : mousedown.target;\n    const isBound = !binding || !binding.instance;\n    const isTargetExists = !mouseUpTarget || !mouseDownTarget;\n    const isContainedByEl = el.contains(mouseUpTarget) || el.contains(mouseDownTarget);\n    const isSelf = el === mouseUpTarget;\n    const isTargetExcluded = excludes.length && excludes.some((item) => item == null ? void 0 : item.contains(mouseUpTarget)) || excludes.length && excludes.includes(mouseDownTarget);\n    const isContainedByPopper = popperRef && (popperRef.contains(mouseUpTarget) || popperRef.contains(mouseDownTarget));\n    if (isBound || isTargetExists || isContainedByEl || isSelf || isTargetExcluded || isContainedByPopper) {\n      return;\n    }\n    binding.value(mouseup, mousedown);\n  };\n}\nconst ClickOutside = {\n  beforeMount(el, binding) {\n    if (!nodeList.has(el)) {\n      nodeList.set(el, []);\n    }\n    nodeList.get(el).push({\n      documentHandler: createDocumentHandler(el, binding),\n      bindingFn: binding.value\n    });\n  },\n  updated(el, binding) {\n    if (!nodeList.has(el)) {\n      nodeList.set(el, []);\n    }\n    const handlers = nodeList.get(el);\n    const oldHandlerIndex = handlers.findIndex((item) => item.bindingFn === binding.oldValue);\n    const newHandler = {\n      documentHandler: createDocumentHandler(el, binding),\n      bindingFn: binding.value\n    };\n    if (oldHandlerIndex >= 0) {\n      handlers.splice(oldHandlerIndex, 1, newHandler);\n    } else {\n      handlers.push(newHandler);\n    }\n  },\n  unmounted(el) {\n    nodeList.delete(el);\n  }\n};\n\nvar index = {\n  beforeMount(el, binding) {\n    let interval = null;\n    let startTime;\n    const handler = () => binding.value && binding.value();\n    const clear = () => {\n      if (Date.now() - startTime < 100) {\n        handler();\n      }\n      clearInterval(interval);\n      interval = null;\n    };\n    on(el, \"mousedown\", (e) => {\n      if (e.button !== 0)\n        return;\n      startTime = Date.now();\n      once(document, \"mouseup\", clear);\n      clearInterval(interval);\n      interval = setInterval(handler, 100);\n    });\n  }\n};\n\nconst FOCUSABLE_CHILDREN = \"_trap-focus-children\";\nconst FOCUS_STACK = [];\nconst FOCUS_HANDLER = (e) => {\n  var _a;\n  if (FOCUS_STACK.length === 0)\n    return;\n  const focusableElement = FOCUS_STACK[FOCUS_STACK.length - 1][FOCUSABLE_CHILDREN];\n  if (focusableElement.length > 0 && e.code === EVENT_CODE.tab) {\n    if (focusableElement.length === 1) {\n      e.preventDefault();\n      if (document.activeElement !== focusableElement[0]) {\n        focusableElement[0].focus();\n      }\n      return;\n    }\n    const goingBackward = e.shiftKey;\n    const isFirst = e.target === focusableElement[0];\n    const isLast = e.target === focusableElement[focusableElement.length - 1];\n    if (isFirst && goingBackward) {\n      e.preventDefault();\n      focusableElement[focusableElement.length - 1].focus();\n    }\n    if (isLast && !goingBackward) {\n      e.preventDefault();\n      focusableElement[0].focus();\n    }\n    if (process.env.NODE_ENV === \"test\") {\n      const index = focusableElement.findIndex((element) => element === e.target);\n      if (index !== -1) {\n        (_a = focusableElement[goingBackward ? index - 1 : index + 1]) == null ? void 0 : _a.focus();\n      }\n    }\n  }\n};\nconst TrapFocus = {\n  beforeMount(el) {\n    el[FOCUSABLE_CHILDREN] = obtainAllFocusableElements(el);\n    FOCUS_STACK.push(el);\n    if (FOCUS_STACK.length <= 1) {\n      on(document, \"keydown\", FOCUS_HANDLER);\n    }\n  },\n  updated(el) {\n    nextTick(() => {\n      el[FOCUSABLE_CHILDREN] = obtainAllFocusableElements(el);\n    });\n  },\n  unmounted() {\n    FOCUS_STACK.shift();\n    if (FOCUS_STACK.length === 0) {\n      off(document, \"keydown\", FOCUS_HANDLER);\n    }\n  }\n};\n\nconst isFirefox = typeof navigator !== \"undefined\" && navigator.userAgent.toLowerCase().indexOf(\"firefox\") > -1;\nconst mousewheel = function(element, callback) {\n  if (element && element.addEventListener) {\n    const fn = function(event) {\n      const normalized = normalizeWheel(event);\n      callback && callback.apply(this, [event, normalized]);\n    };\n    if (isFirefox) {\n      element.addEventListener(\"DOMMouseScroll\", fn);\n    } else {\n      element.onmousewheel = fn;\n    }\n  }\n};\nconst Mousewheel = {\n  beforeMount(el, binding) {\n    mousewheel(el, binding.value);\n  }\n};\n\nconst Resize = {\n  beforeMount(el, binding) {\n    el._handleResize = () => {\n      var _a;\n      el && ((_a = binding.value) == null ? void 0 : _a.call(binding));\n    };\n    addResizeListener(el, el._handleResize);\n  },\n  beforeUnmount(el) {\n    removeResizeListener(el, el._handleResize);\n  }\n};\n\nexport { ClickOutside, Mousewheel, index as RepeatClick, Resize, TrapFocus };\n"]},"metadata":{},"sourceType":"module"}