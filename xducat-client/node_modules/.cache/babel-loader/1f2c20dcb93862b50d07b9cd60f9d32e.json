{"ast":null,"code":"import { EVENT_CODE, triggerEvent } from '../aria';\n\nclass SubMenu {\n  constructor(parent, domNode) {\n    this.parent = parent;\n    this.domNode = domNode;\n    this.subIndex = 0;\n    this.subIndex = 0;\n    this.init();\n  }\n\n  init() {\n    this.subMenuItems = this.domNode.querySelectorAll('li');\n    this.addListeners();\n  }\n\n  gotoSubIndex(idx) {\n    if (idx === this.subMenuItems.length) {\n      idx = 0;\n    } else if (idx < 0) {\n      idx = this.subMenuItems.length - 1;\n    }\n\n    this.subMenuItems[idx].focus();\n    this.subIndex = idx;\n  }\n\n  addListeners() {\n    const parentNode = this.parent.domNode;\n    Array.prototype.forEach.call(this.subMenuItems, el => {\n      el.addEventListener('keydown', event => {\n        let prevDef = false;\n\n        switch (event.code) {\n          case EVENT_CODE.down:\n            {\n              this.gotoSubIndex(this.subIndex + 1);\n              prevDef = true;\n              break;\n            }\n\n          case EVENT_CODE.up:\n            {\n              this.gotoSubIndex(this.subIndex - 1);\n              prevDef = true;\n              break;\n            }\n\n          case EVENT_CODE.tab:\n            {\n              triggerEvent(parentNode, 'mouseleave');\n              break;\n            }\n\n          case EVENT_CODE.enter:\n          case EVENT_CODE.space:\n            {\n              prevDef = true;\n              event.currentTarget.click();\n              break;\n            }\n        }\n\n        if (prevDef) {\n          event.preventDefault();\n          event.stopPropagation();\n        }\n\n        return false;\n      });\n    });\n  }\n\n}\n\nexport default SubMenu;","map":{"version":3,"sources":["F:/XDUcat/XDUcat-client/node_modules/element-plus/es/utils/menu/submenu.js"],"names":["EVENT_CODE","triggerEvent","SubMenu","constructor","parent","domNode","subIndex","init","subMenuItems","querySelectorAll","addListeners","gotoSubIndex","idx","length","focus","parentNode","Array","prototype","forEach","call","el","addEventListener","event","prevDef","code","down","up","tab","enter","space","currentTarget","click","preventDefault","stopPropagation"],"mappings":"AAAA,SAASA,UAAT,EAAqBC,YAArB,QAAyC,SAAzC;;AAEA,MAAMC,OAAN,CAAc;AACVC,EAAAA,WAAW,CAACC,MAAD,EAASC,OAAT,EAAkB;AACzB,SAAKD,MAAL,GAAcA,MAAd;AACA,SAAKC,OAAL,GAAeA,OAAf;AACA,SAAKC,QAAL,GAAgB,CAAhB;AACA,SAAKA,QAAL,GAAgB,CAAhB;AACA,SAAKC,IAAL;AACH;;AACDA,EAAAA,IAAI,GAAG;AACH,SAAKC,YAAL,GAAoB,KAAKH,OAAL,CAAaI,gBAAb,CAA8B,IAA9B,CAApB;AACA,SAAKC,YAAL;AACH;;AACDC,EAAAA,YAAY,CAACC,GAAD,EAAM;AACd,QAAIA,GAAG,KAAK,KAAKJ,YAAL,CAAkBK,MAA9B,EAAsC;AAClCD,MAAAA,GAAG,GAAG,CAAN;AACH,KAFD,MAGK,IAAIA,GAAG,GAAG,CAAV,EAAa;AACdA,MAAAA,GAAG,GAAG,KAAKJ,YAAL,CAAkBK,MAAlB,GAA2B,CAAjC;AACH;;AACD,SAAKL,YAAL,CAAkBI,GAAlB,EAAuBE,KAAvB;AACA,SAAKR,QAAL,GAAgBM,GAAhB;AACH;;AACDF,EAAAA,YAAY,GAAG;AACX,UAAMK,UAAU,GAAG,KAAKX,MAAL,CAAYC,OAA/B;AACAW,IAAAA,KAAK,CAACC,SAAN,CAAgBC,OAAhB,CAAwBC,IAAxB,CAA6B,KAAKX,YAAlC,EAAiDY,EAAD,IAAQ;AACpDA,MAAAA,EAAE,CAACC,gBAAH,CAAoB,SAApB,EAAgCC,KAAD,IAAW;AACtC,YAAIC,OAAO,GAAG,KAAd;;AACA,gBAAQD,KAAK,CAACE,IAAd;AACI,eAAKxB,UAAU,CAACyB,IAAhB;AAAsB;AAClB,mBAAKd,YAAL,CAAkB,KAAKL,QAAL,GAAgB,CAAlC;AACAiB,cAAAA,OAAO,GAAG,IAAV;AACA;AACH;;AACD,eAAKvB,UAAU,CAAC0B,EAAhB;AAAoB;AAChB,mBAAKf,YAAL,CAAkB,KAAKL,QAAL,GAAgB,CAAlC;AACAiB,cAAAA,OAAO,GAAG,IAAV;AACA;AACH;;AACD,eAAKvB,UAAU,CAAC2B,GAAhB;AAAqB;AACjB1B,cAAAA,YAAY,CAACc,UAAD,EAAa,YAAb,CAAZ;AACA;AACH;;AACD,eAAKf,UAAU,CAAC4B,KAAhB;AACA,eAAK5B,UAAU,CAAC6B,KAAhB;AAAuB;AACnBN,cAAAA,OAAO,GAAG,IAAV;AACAD,cAAAA,KAAK,CAACQ,aAAN,CAAoBC,KAApB;AACA;AACH;AApBL;;AAsBA,YAAIR,OAAJ,EAAa;AACTD,UAAAA,KAAK,CAACU,cAAN;AACAV,UAAAA,KAAK,CAACW,eAAN;AACH;;AACD,eAAO,KAAP;AACH,OA7BD;AA8BH,KA/BD;AAgCH;;AAxDS;;AA2Dd,eAAe/B,OAAf","sourcesContent":["import { EVENT_CODE, triggerEvent } from '../aria';\n\nclass SubMenu {\r\n    constructor(parent, domNode) {\r\n        this.parent = parent;\r\n        this.domNode = domNode;\r\n        this.subIndex = 0;\r\n        this.subIndex = 0;\r\n        this.init();\r\n    }\r\n    init() {\r\n        this.subMenuItems = this.domNode.querySelectorAll('li');\r\n        this.addListeners();\r\n    }\r\n    gotoSubIndex(idx) {\r\n        if (idx === this.subMenuItems.length) {\r\n            idx = 0;\r\n        }\r\n        else if (idx < 0) {\r\n            idx = this.subMenuItems.length - 1;\r\n        }\r\n        this.subMenuItems[idx].focus();\r\n        this.subIndex = idx;\r\n    }\r\n    addListeners() {\r\n        const parentNode = this.parent.domNode;\r\n        Array.prototype.forEach.call(this.subMenuItems, (el) => {\r\n            el.addEventListener('keydown', (event) => {\r\n                let prevDef = false;\r\n                switch (event.code) {\r\n                    case EVENT_CODE.down: {\r\n                        this.gotoSubIndex(this.subIndex + 1);\r\n                        prevDef = true;\r\n                        break;\r\n                    }\r\n                    case EVENT_CODE.up: {\r\n                        this.gotoSubIndex(this.subIndex - 1);\r\n                        prevDef = true;\r\n                        break;\r\n                    }\r\n                    case EVENT_CODE.tab: {\r\n                        triggerEvent(parentNode, 'mouseleave');\r\n                        break;\r\n                    }\r\n                    case EVENT_CODE.enter:\r\n                    case EVENT_CODE.space: {\r\n                        prevDef = true;\r\n                        event.currentTarget.click();\r\n                        break;\r\n                    }\r\n                }\r\n                if (prevDef) {\r\n                    event.preventDefault();\r\n                    event.stopPropagation();\r\n                }\r\n                return false;\r\n            });\r\n        });\r\n    }\r\n}\n\nexport default SubMenu;\n"]},"metadata":{},"sourceType":"module"}