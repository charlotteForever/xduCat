{"ast":null,"code":"import { defineComponent, ref, reactive, computed, watch, onMounted, onBeforeUnmount, openBlock, createBlock, createVNode, renderSlot } from 'vue';\nimport { getScrollContainer, on, off } from '../utils/dom';\nimport { addResizeListener, removeResizeListener } from '../utils/resize-event';\nvar script = defineComponent({\n  name: \"ElAffix\",\n  props: {\n    zIndex: {\n      type: Number,\n      default: 100\n    },\n    target: {\n      type: String,\n      default: \"\"\n    },\n    offset: {\n      type: Number,\n      default: 0\n    },\n    position: {\n      type: String,\n      default: \"top\"\n    }\n  },\n  emits: [\"scroll\", \"change\"],\n\n  setup(props, {\n    emit\n  }) {\n    const target = ref(null);\n    const root = ref(null);\n    const scrollContainer = ref(null);\n    const state = reactive({\n      fixed: false,\n      height: 0,\n      width: 0,\n      scrollTop: 0,\n      clientHeight: 0,\n      transform: 0\n    });\n    const rootStyle = computed(() => {\n      return {\n        height: state.fixed ? `${state.height}px` : \"\",\n        width: state.fixed ? `${state.width}px` : \"\"\n      };\n    });\n    const affixStyle = computed(() => {\n      if (!state.fixed) {\n        return;\n      }\n\n      const offset = props.offset ? `${props.offset}px` : 0;\n      const transform = state.transform ? `translateY(${state.transform}px)` : \"\";\n      return {\n        height: `${state.height}px`,\n        width: `${state.width}px`,\n        top: props.position === \"top\" ? offset : \"\",\n        bottom: props.position === \"bottom\" ? offset : \"\",\n        transform,\n        zIndex: props.zIndex\n      };\n    });\n\n    const update = () => {\n      const rootRect = root.value.getBoundingClientRect();\n      const targetRect = target.value.getBoundingClientRect();\n      state.height = rootRect.height;\n      state.width = rootRect.width;\n      state.scrollTop = scrollContainer.value === window ? document.documentElement.scrollTop : scrollContainer.value.scrollTop;\n      state.clientHeight = document.documentElement.clientHeight;\n\n      if (props.position === \"top\") {\n        if (props.target) {\n          const difference = targetRect.bottom - props.offset - state.height;\n          state.fixed = props.offset > rootRect.top && targetRect.bottom > 0;\n          state.transform = difference < 0 ? difference : 0;\n        } else {\n          state.fixed = props.offset > rootRect.top;\n        }\n      } else {\n        if (props.target) {\n          const difference = state.clientHeight - targetRect.top - props.offset - state.height;\n          state.fixed = state.clientHeight - props.offset < rootRect.bottom && state.clientHeight > targetRect.top;\n          state.transform = difference < 0 ? -difference : 0;\n        } else {\n          state.fixed = state.clientHeight - props.offset < rootRect.bottom;\n        }\n      }\n    };\n\n    const onScroll = () => {\n      update();\n      emit(\"scroll\", {\n        scrollTop: state.scrollTop,\n        fixed: state.fixed\n      });\n    };\n\n    watch(() => state.fixed, () => {\n      emit(\"change\", state.fixed);\n    });\n    onMounted(() => {\n      if (props.target) {\n        target.value = document.querySelector(props.target);\n\n        if (!target.value) {\n          throw new Error(`target is not existed: ${props.target}`);\n        }\n      } else {\n        target.value = document.documentElement;\n      }\n\n      scrollContainer.value = getScrollContainer(root.value);\n      on(scrollContainer.value, \"scroll\", onScroll);\n      addResizeListener(root.value, update);\n    });\n    onBeforeUnmount(() => {\n      off(scrollContainer.value, \"scroll\", onScroll);\n      removeResizeListener(root.value, update);\n    });\n    return {\n      root,\n      state,\n      rootStyle,\n      affixStyle,\n      update\n    };\n  }\n\n});\n\nfunction render(_ctx, _cache, $props, $setup, $data, $options) {\n  return openBlock(), createBlock(\"div\", {\n    ref: \"root\",\n    class: \"el-affix\",\n    style: _ctx.rootStyle\n  }, [createVNode(\"div\", {\n    class: {\n      \"el-affix--fixed\": _ctx.state.fixed\n    },\n    style: _ctx.affixStyle\n  }, [renderSlot(_ctx.$slots, \"default\")], 6)], 4);\n}\n\nscript.render = render;\nscript.__file = \"packages/affix/src/index.vue\";\n\nscript.install = app => {\n  app.component(script.name, script);\n};\n\nconst _Affix = script;\nexport default _Affix;","map":{"version":3,"sources":["D:/A-大三下/web开发/xducat/xducat-client/node_modules/element-plus/es/el-affix/index.js"],"names":["defineComponent","ref","reactive","computed","watch","onMounted","onBeforeUnmount","openBlock","createBlock","createVNode","renderSlot","getScrollContainer","on","off","addResizeListener","removeResizeListener","script","name","props","zIndex","type","Number","default","target","String","offset","position","emits","setup","emit","root","scrollContainer","state","fixed","height","width","scrollTop","clientHeight","transform","rootStyle","affixStyle","top","bottom","update","rootRect","value","getBoundingClientRect","targetRect","window","document","documentElement","difference","onScroll","querySelector","Error","render","_ctx","_cache","$props","$setup","$data","$options","class","style","$slots","__file","install","app","component","_Affix"],"mappings":"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","sourcesContent":["import { defineComponent, ref, reactive, computed, watch, onMounted, onBeforeUnmount, openBlock, createBlock, createVNode, renderSlot } from 'vue';\nimport { getScrollContainer, on, off } from '../utils/dom';\nimport { addResizeListener, removeResizeListener } from '../utils/resize-event';\n\nvar script = defineComponent({\n  name: \"ElAffix\",\n  props: {\n    zIndex: {\n      type: Number,\n      default: 100\n    },\n    target: {\n      type: String,\n      default: \"\"\n    },\n    offset: {\n      type: Number,\n      default: 0\n    },\n    position: {\n      type: String,\n      default: \"top\"\n    }\n  },\n  emits: [\"scroll\", \"change\"],\n  setup(props, { emit }) {\n    const target = ref(null);\n    const root = ref(null);\n    const scrollContainer = ref(null);\n    const state = reactive({\n      fixed: false,\n      height: 0,\n      width: 0,\n      scrollTop: 0,\n      clientHeight: 0,\n      transform: 0\n    });\n    const rootStyle = computed(() => {\n      return {\n        height: state.fixed ? `${state.height}px` : \"\",\n        width: state.fixed ? `${state.width}px` : \"\"\n      };\n    });\n    const affixStyle = computed(() => {\n      if (!state.fixed) {\n        return;\n      }\n      const offset = props.offset ? `${props.offset}px` : 0;\n      const transform = state.transform ? `translateY(${state.transform}px)` : \"\";\n      return {\n        height: `${state.height}px`,\n        width: `${state.width}px`,\n        top: props.position === \"top\" ? offset : \"\",\n        bottom: props.position === \"bottom\" ? offset : \"\",\n        transform,\n        zIndex: props.zIndex\n      };\n    });\n    const update = () => {\n      const rootRect = root.value.getBoundingClientRect();\n      const targetRect = target.value.getBoundingClientRect();\n      state.height = rootRect.height;\n      state.width = rootRect.width;\n      state.scrollTop = scrollContainer.value === window ? document.documentElement.scrollTop : scrollContainer.value.scrollTop;\n      state.clientHeight = document.documentElement.clientHeight;\n      if (props.position === \"top\") {\n        if (props.target) {\n          const difference = targetRect.bottom - props.offset - state.height;\n          state.fixed = props.offset > rootRect.top && targetRect.bottom > 0;\n          state.transform = difference < 0 ? difference : 0;\n        } else {\n          state.fixed = props.offset > rootRect.top;\n        }\n      } else {\n        if (props.target) {\n          const difference = state.clientHeight - targetRect.top - props.offset - state.height;\n          state.fixed = state.clientHeight - props.offset < rootRect.bottom && state.clientHeight > targetRect.top;\n          state.transform = difference < 0 ? -difference : 0;\n        } else {\n          state.fixed = state.clientHeight - props.offset < rootRect.bottom;\n        }\n      }\n    };\n    const onScroll = () => {\n      update();\n      emit(\"scroll\", {\n        scrollTop: state.scrollTop,\n        fixed: state.fixed\n      });\n    };\n    watch(() => state.fixed, () => {\n      emit(\"change\", state.fixed);\n    });\n    onMounted(() => {\n      if (props.target) {\n        target.value = document.querySelector(props.target);\n        if (!target.value) {\n          throw new Error(`target is not existed: ${props.target}`);\n        }\n      } else {\n        target.value = document.documentElement;\n      }\n      scrollContainer.value = getScrollContainer(root.value);\n      on(scrollContainer.value, \"scroll\", onScroll);\n      addResizeListener(root.value, update);\n    });\n    onBeforeUnmount(() => {\n      off(scrollContainer.value, \"scroll\", onScroll);\n      removeResizeListener(root.value, update);\n    });\n    return {\n      root,\n      state,\n      rootStyle,\n      affixStyle,\n      update\n    };\n  }\n});\n\nfunction render(_ctx, _cache, $props, $setup, $data, $options) {\n  return openBlock(), createBlock(\"div\", {\n    ref: \"root\",\n    class: \"el-affix\",\n    style: _ctx.rootStyle\n  }, [\n    createVNode(\"div\", {\n      class: { \"el-affix--fixed\": _ctx.state.fixed },\n      style: _ctx.affixStyle\n    }, [\n      renderSlot(_ctx.$slots, \"default\")\n    ], 6)\n  ], 4);\n}\n\nscript.render = render;\nscript.__file = \"packages/affix/src/index.vue\";\n\nscript.install = (app) => {\n  app.component(script.name, script);\n};\nconst _Affix = script;\n\nexport default _Affix;\n"]},"metadata":{},"sourceType":"module"}